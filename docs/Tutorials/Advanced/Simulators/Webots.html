<!DOCTYPE html>
<html class="writer-html5" lang="fr" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mise en place d’une simulation de robot (Webots) &mdash; Documentation ROS 2 documentation </title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="canonical" href="https://docs.ros.org/en/Tutorials/Advanced/Simulators/Webots.html" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/clipboard.min.js"></script>
        <script src="../../../_static/copybutton.js"></script>
        <script src="../../../_static/tabs.js"></script>
        <script src="../../../_static/translations.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Recherche" href="../../../search.html" />
    <link rel="next" title="Mise en place d’une simulation de robot (Gazebo)" href="Gazebo.html" />
    <link rel="prev" title="Simulation" href="Simulation-Main.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> ROS 2 documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../Installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../Installation/Ubuntu-Install-Debians.html">Ubuntu (Debian)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Installation/Windows-Install-Binary.html">Windows (binaire)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Installation/RHEL-Install-RPMs.html">RHEL (RPM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Installation/Alternatives.html">Alternatives</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../Installation/Alternatives/Ubuntu-Development-Setup.html">gratuit (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../Installation/Alternatives/Ubuntu-Install-Binary.html">gratuit (binaire)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../Installation/Alternatives/Windows-Development-Setup.html">Windows (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../Installation/Alternatives/RHEL-Development-Setup.html">RHEL (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../Installation/Alternatives/RHEL-Install-Binary.html">RHEL (binaire)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../Installation/Alternatives/macOS-Development-Setup.html">mac OS (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../Installation/Alternatives/Fedora-Development-Setup.html">Fedora (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../Installation/Alternatives/Latest-Development-Setup.html">Dernier développement (source)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../Installation/Maintaining-a-Source-Checkout.html">Maintenir la vérification de la source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Installation/Testing.html">Tester avec des binaires de pré-version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Installation/DDS-Implementations.html">Implémentations DDS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../Installation/DDS-Implementations/Install-Connext-Security-Plugins.html">Plugins de sécurité Connect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../Installation/DDS-Implementations/Install-Connext-University-Eval.html">RTI Connect DDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../Installation/DDS-Implementations/Working-with-Eclipse-CycloneDDS.html">Éclipse Cyclone DDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../Installation/DDS-Implementations/Working-with-GurumNetworks-GurumDDS.html">GurumNetworks GurumDDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../Installation/DDS-Implementations/Working-with-eProsima-Fast-DDS.html">DDS rapide eProsima</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../Releases.html">Distributions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../Releases/Release-Humble-Hawksbill.html">Humble Hawksbill (<code class="docutils literal notranslate"><span class="pre">humble</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../Releases/Humble-Hawksbill-Complete-Changelog.html">Journal des modifications de Humble Hawksbill</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../Releases/Release-Foxy-Fitzroy.html">Foxy Fitzroy (<code class="docutils literal notranslate"><span class="pre">foxy</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Releases/Release-Rolling-Ridley.html">Rouler Ridley (<code class="docutils literal notranslate"><span class="pre">rouler</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Releases/Development.html">Développement Répartition</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../Releases/Release-Iron-Irwini.html">ROS 2 Iron Irwini (nom de code “iron”; mai 2023)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../Releases/End-of-Life.html">Distributions en fin de vie</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../Releases/Release-Galactic-Geochelone.html">Géochelone Galactique (<code class="docutils literal notranslate"><span class="pre">galactique</span></code>)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../Releases/Galactic-Geochelone-Complete-Changelog.html">Journal des modifications de Galactic Geochelone</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../Releases/Release-Eloquent-Elusor.html">Eloquent Elusor (``éloquent””)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../Releases/Release-Dashing-Diademata.html">Dashing Diademata (<code class="docutils literal notranslate"><span class="pre">fringant</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../Releases/Release-Crystal-Clemmys.html">Cristal Clemmys (<code class="docutils literal notranslate"><span class="pre">cristal</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../Releases/Release-Bouncy-Bolson.html">Bouncy Bolson (<code class="docutils literal notranslate"><span class="pre">rebondissant</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../Releases/Release-Ardent-Apalone.html">Apalone ardent (<code class="docutils literal notranslate"><span class="pre">ardent</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../Releases/Beta3-Overview.html">Bêta 3 (<code class="docutils literal notranslate"><span class="pre">r2b3</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../Releases/Beta2-Overview.html">Bêta 2 (<code class="docutils literal notranslate"><span class="pre">r2b2</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../Releases/Beta1-Overview.html">Bêta 1 (<code class="docutils literal notranslate"><span class="pre">Asphalte</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../Releases/Alpha-Overview.html">Alphas</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../Releases/Release-Process.html">Processus de développement d’une version</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../Tutorials.html">Tutoriels</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../Beginner-CLI-Tools.html">Débutant : outils CLI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-CLI-Tools/Configuring-ROS2-Environment.html">Configuration de l’environnement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-CLI-Tools/Introducing-Turtlesim/Introducing-Turtlesim.html">Utiliser <code class="docutils literal notranslate"><span class="pre">turtlesim</span></code> et <code class="docutils literal notranslate"><span class="pre">rqt</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-CLI-Tools/Understanding-ROS2-Nodes/Understanding-ROS2-Nodes.html">Comprendre les nœuds</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-CLI-Tools/Understanding-ROS2-Topics/Understanding-ROS2-Topics.html">Comprendre les sujets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-CLI-Tools/Understanding-ROS2-Services/Understanding-ROS2-Services.html">Comprendre les services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-CLI-Tools/Understanding-ROS2-Parameters/Understanding-ROS2-Parameters.html">Comprendre les paramètres</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-CLI-Tools/Understanding-ROS2-Actions/Understanding-ROS2-Actions.html">Comprendre les actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-CLI-Tools/Using-Rqt-Console/Using-Rqt-Console.html">Utilisation de <code class="docutils literal notranslate"><span class="pre">rqt_console</span></code> pour afficher les journaux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-CLI-Tools/Launching-Multiple-Nodes/Launching-Multiple-Nodes.html">Nœuds de lancement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-CLI-Tools/Recording-And-Playing-Back-Data/Recording-And-Playing-Back-Data.html">Enregistrement et lecture de données</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Beginner-Client-Libraries.html">Débutant : Bibliothèques clientes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-Client-Libraries/Colcon-Tutorial.html">Utiliser <code class="docutils literal notranslate"><span class="pre">colcon</span></code> pour créer des packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-Client-Libraries/Creating-A-Workspace/Creating-A-Workspace.html">Créer un espace de travail</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-Client-Libraries/Creating-Your-First-ROS2-Package.html">Création d’un paquet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-Client-Libraries/Writing-A-Simple-Cpp-Publisher-And-Subscriber.html">Écrire un simple éditeur et abonné (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-Client-Libraries/Writing-A-Simple-Py-Publisher-And-Subscriber.html">Écrire un simple éditeur et abonné (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-Client-Libraries/Writing-A-Simple-Cpp-Service-And-Client.html">Ecrire un service et un client simples (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-Client-Libraries/Writing-A-Simple-Py-Service-And-Client.html">Écrire un service et un client simples (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-Client-Libraries/Custom-ROS2-Interfaces.html">Création de fichiers msg et srv personnalisés</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-Client-Libraries/Single-Package-Define-And-Use-Interface.html">Implémentation d’interfaces personnalisées</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-Client-Libraries/Using-Parameters-In-A-Class-CPP.html">Utiliser des paramètres dans une classe (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-Client-Libraries/Using-Parameters-In-A-Class-Python.html">Utiliser des paramètres dans une classe (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-Client-Libraries/Getting-Started-With-Ros2doctor.html">Utiliser <code class="docutils literal notranslate"><span class="pre">ros2doctor</span></code> pour identifier les problèmes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Beginner-Client-Libraries/Pluginlib.html">Créer et utiliser des plugins (C++)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Intermediate.html">Intermédiaire</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Intermediate/Rosdep.html">Gestion des dépendances avec rosdep</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Intermediate/Creating-an-Action.html">Créer une action</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Intermediate/Writing-an-Action-Server-Client/Cpp.html">Ecriture d’un serveur d’action et d’un client (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Intermediate/Writing-an-Action-Server-Client/Py.html">Ecriture d’un serveur d’action et d’un client (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Intermediate/Composition.html">Composer plusieurs nœuds en un seul processus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Intermediate/Monitoring-For-Parameter-Changes-CPP.html">Surveillance des changements de paramètres (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Intermediate/Launch/Launch-Main.html">Lancement</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Launch/Creating-Launch-Files.html">Création d’un fichier de lancement</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Launch/Launch-system.html">Intégration des fichiers de lancement dans les packages ROS 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Launch/Using-Substitutions.html">Utiliser des substitutions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Launch/Using-Event-Handlers.html">Utilisation des gestionnaires d’événements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Launch/Using-ROS2-Launch-For-Large-Projects.html">Gestion de grands projets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Intermediate/Tf2/Tf2-Main.html">tracé</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Tf2/Introduction-To-Tf2.html">Présentation de <code class="docutils literal notranslate"><span class="pre">tf2</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Tf2/Writing-A-Tf2-Static-Broadcaster-Py.html">Écrire un diffuseur statique (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Tf2/Writing-A-Tf2-Static-Broadcaster-Cpp.html">Écrire un diffuseur statique (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Tf2/Writing-A-Tf2-Broadcaster-Py.html">Écrire un diffuseur (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Tf2/Writing-A-Tf2-Broadcaster-Cpp.html">Ecrire un diffuseur (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Tf2/Writing-A-Tf2-Listener-Py.html">Écrire un écouteur (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Tf2/Writing-A-Tf2-Listener-Cpp.html">Écrire un écouteur (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Tf2/Adding-A-Frame-Py.html">Ajouter un cadre (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Tf2/Adding-A-Frame-Cpp.html">Ajouter un cadre (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Tf2/Learning-About-Tf2-And-Time-Py.html">Utiliser le temps (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Tf2/Learning-About-Tf2-And-Time-Cpp.html">Utilisation du temps (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Tf2/Time-Travel-With-Tf2-Py.html">Voyager dans le temps (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Tf2/Time-Travel-With-Tf2-Cpp.html">Voyager dans le temps (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Tf2/Debugging-Tf2-Problems.html">Débogage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Tf2/Quaternion-Fundamentals.html">Fondamentaux du quaternion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Tf2/Using-Stamped-Datatypes-With-Tf2-Ros-MessageFilter.html">Utiliser des types de données tamponnés avec <code class="docutils literal notranslate"><span class="pre">tf2_ros::MessageFilter</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Intermediate/Testing/Testing-Main.html">Essai</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Testing/CLI.html">Exécution de tests dans ROS 2 à partir de la ligne de commande</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/Testing/Python.html">Écrire des tests de base avec Python</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Intermediate/URDF/URDF-Main.html">URDF</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/URDF/Building-a-Visual-Robot-Model-with-URDF-from-Scratch.html">Construire un modèle de robot visuel à partir de zéro</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/URDF/Building-a-Movable-Robot-Model-with-URDF.html">Construire un modèle de robot mobile</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/URDF/Adding-Physical-and-Collision-Properties-to-a-URDF-Model.html">Ajout de propriétés physiques et de collision</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/URDF/Using-Xacro-to-Clean-Up-a-URDF-File.html">Utiliser Xacro pour nettoyer votre code</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Intermediate/URDF/Using-URDF-with-Robot-State-Publisher.html">Utiliser URDF avec <code class="docutils literal notranslate"><span class="pre">robot_state_publisher</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../../Advanced.html">Avancé</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../Topic-Statistics-Tutorial/Topic-Statistics-Tutorial.html">Activation des statistiques de sujet (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Discovery-Server/Discovery-Server.html">Utilisation de Fast DDS Discovery Server comme protocole de découverte [contribution de la communauté]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Allocator-Template-Tutorial.html">Implémentation d’un répartiteur de mémoire personnalisé</a></li>
<li class="toctree-l3"><a class="reference internal" href="../FastDDS-Configuration.html">Libérer le potentiel du middleware Fast DDS [contribution de la communauté]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Recording-A-Bag-From-Your-Own-Node-CPP.html">Enregistrer un sac à partir d’un nœud (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Recording-A-Bag-From-Your-Own-Node-Py.html">Enregistrer un sac à partir d’un nœud (Python)</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="Simulation-Main.html">Simulation</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Mise en place d’une simulation de robot (Webots)</a></li>
<li class="toctree-l4"><a class="reference internal" href="Gazebo.html">Mise en place d’une simulation de robot (Gazebo)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Security/Security-Main.html">Sécurité</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Security/Introducing-ros2-security.html">Mise en place de la sécurité</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Security/The-Keystore.html">Comprendre le magasin de clés de sécurité</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Security/Security-on-Two.html">Garantir la sécurité sur toutes les machines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Security/Examine-Traffic.html">Examen du trafic réseau</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Security/Access-Controls.html">Paramétrage des contrôles d’accès</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Demos.html">Démos</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Demos/Quality-of-Service.html">Utilisation des paramètres de qualité de service pour les réseaux avec perte</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Demos/Managed-Nodes.html">Gestion des nœuds avec des cycles de vie gérés</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Demos/Intra-Process-Communication.html">Mettre en place une communication intra-process efficace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Demos/Rosbag-with-ROS1-Bridge.html">Enregistrement et lecture de données avec <code class="docutils literal notranslate"><span class="pre">rosbag</span></code> en utilisant le pont ROS 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Demos/Real-Time-Programming.html">Comprendre la programmation temps réel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Demos/dummy-robot-demo.html">Expérimenter avec un robot factice</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Demos/Logging-and-logger-configuration.html">Enregistrement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Demos/Content-Filtering-Subscription.html">Création d’un abonnement au filtrage de contenu</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Miscellaneous.html">Divers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Miscellaneous/Deploying-ROS-2-on-IBM-Cloud.html">Déploiement sur IBM Cloud Kubernetes [contribution de la communauté]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Miscellaneous/Eclipse-Oxygen-with-ROS-2-and-rviz2.html">Utiliser Eclipse Oxygen avec <code class="docutils literal notranslate"><span class="pre">rviz2</span></code> [community-contributed]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Miscellaneous/Building-Realtime-rt_preempt-kernel-for-ROS-2.html">Construire un noyau Linux en temps réel [contribution de la communauté]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Miscellaneous/Building-ROS2-Package-with-eclipse-2021-06.html">Construire un package avec Eclipse 2021-06</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../How-To-Guides.html">Guides pratiques</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Installation-Troubleshooting.html">Dépannage de l’installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Developing-a-ROS-2-Package.html">Développement d’un package ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Ament-CMake-Documentation.html">documentation utilisateur ament_cmake</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Ament-CMake-Python-Documentation.html">documentation utilisateur ament_cmake_python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Launch-files-migration-guide.html">Migration des fichiers de lancement de ROS 1 vers ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Launch-file-different-formats.html">Utilisation de Python, XML et YAML pour les fichiers de lancement ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Launching-composable-nodes.html">Utilisation du lancement de ROS 2 pour lancer des nœuds composables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Parameters-YAML-files-migration-guide.html">Migration des fichiers de paramètres YAML de ROS 1 vers ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Node-arguments.html">Passer des arguments ROS aux nœuds via la ligne de commande</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Sync-Vs-Async.html">Clients de service synchrones ou asynchrones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/DDS-tuning.html">Informations de réglage DDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Overriding-QoS-Policies-For-Recording-And-Playback.html">rosbag2 : Remplacement des politiques de QoS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Working-with-multiple-RMW-implementations.html">Travailler avec plusieurs implémentations de middleware ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Cross-compilation.html">Compilation croisée</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Releasing/Releasing-a-Package.html">Libérer un paquet</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../How-To-Guides/Releasing/First-Time-Release.html">Première sortie</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../How-To-Guides/Releasing/Subsequent-Releases.html">Versions ultérieures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../How-To-Guides/Releasing/Release-Team-Repository.html">Équipe de publication / Référentiel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../How-To-Guides/Releasing/Release-Track.html">Piste de sortie</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Using-Python-Packages.html">Utilisation de packages Python avec ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/RQt-Port-Plugin-Windows.html">Portage des plugins RQt vers Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Run-2-nodes-in-single-or-separate-docker-containers.html">Exécution de nœuds ROS 2 dans Docker [contribution de la communauté]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Visualizing-ROS-2-Data-With-Foxglove-Studio.html">Visualiser les données ROS 2 avec Foxglove Studio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Package-maintainer-guide.html">Guide du responsable du paquet ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Building-a-Custom-Debian-Package.html">Construire un paquet Debian personnalisé</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Building-ROS-2-with-Tracing-Instrumentation.html">Construire ROS 2 avec instrumentation de traçage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Topics-Services-Actions.html">Sujets vs Services vs Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Using-Variants.html">Utiliser des variantes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Using-ros2-param.html">Utilisation de l’outil de ligne de commande <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">param</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Using-ros1_bridge-Jammy-upstream.html">Utilisation de <code class="docutils literal notranslate"><span class="pre">ros1_bridge</span></code> avec ROS en amont sur Ubuntu 22.04</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Disabling-ZeroCopy-loaned-messages.html">Désactivation des messages prêtés sans copie</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Installing-on-Raspberry-Pi.html">ROS 2 sur Raspberry Pi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/Using-callback-groups.html">Utilisation des groupes de rappel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../How-To-Guides/RQt-Source-Install.html">Construire RQt à partir de la source</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../How-To-Guides/RQt-Source-Install-MacOS.html">Construire RQt à partir de la source sur macOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../How-To-Guides/RQt-Source-Install-Windows10.html">Construire RQt à partir de la source sur Windows 10</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../Concepts.html">Notions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../Concepts/About-Domain-ID.html">Le ROS_DOMAIN_ID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Concepts/About-Different-Middleware-Vendors.html">À propos des différents fournisseurs ROS 2 DDS/RTPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Concepts/About-Logging.html">À propos de la journalisation et de la configuration de l’enregistreur</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Concepts/About-Quality-of-Service-Settings.html">À propos des paramètres de qualité de service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Concepts/About-ROS-2-Client-Libraries.html">À propos des bibliothèques clientes ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Concepts/About-ROS-Interfaces.html">À propos des interfaces ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Concepts/About-ROS-2-Parameters.html">À propos des paramètres dans ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Concepts/About-Executors.html">Exécuteurs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Concepts/About-Topic-Statistics.html">À propos des statistiques de sujet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Concepts/About-Command-Line-Tools.html">Introspection avec des outils en ligne de commande</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Concepts/About-RQt.html">Présentation et utilisation de RQt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Concepts/About-Composition.html">À propos de la composition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Concepts/About-Catment.html">Sur le mélange d’ament et de chaton (catment)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Concepts/About-Cross-Compilation.html">À propos de la compilation croisée</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Concepts/About-Security.html">À propos de la sécurité ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Concepts/About-Tf2.html">À propos de TF2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Concepts/About-Build-System.html">À propos du système de construction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Concepts/About-Internal-Interfaces.html">À propos des interfaces ROS 2 internes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Concepts/About-Middleware-Implementations.html">À propos des implémentations de middleware ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Concepts/About-ROS-2-Client-Libraries.html">À propos des bibliothèques clientes ROS 2</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../Contact.html">Contacter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../The-ROS2-Project.html">Le projet ROS 2</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../The-ROS2-Project/Contributing.html">Contribuant</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../The-ROS2-Project/Contributing/Developer-Guide.html">Guide du développeur ROS 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../The-ROS2-Project/Contributing/Code-Style-Language-Versions.html">Style de code et versions linguistiques</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../The-ROS2-Project/Contributing/Quality-Guide.html">Guide qualité : assurer la qualité du code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../The-ROS2-Project/Contributing/Migration-Guide.html">Guide de migration depuis ROS 1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../The-ROS2-Project/Contributing/Migration-Guide-Python.html">Guide de migration Python depuis ROS 1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../The-ROS2-Project/Contributing/Build-Farms.html">Fermes de construction ROS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../The-ROS2-Project/Contributing/Windows-Tips-and-Tricks.html">Trucs et astuces Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../The-ROS2-Project/Contributing/Contributing-To-ROS-2-Documentation.html">Contribuer à la documentation ROS 2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../The-ROS2-Project/Features.html">Statut des fonctionnalités</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../The-ROS2-Project/Feature-Ideas.html">Idées de fonctionnalités</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../The-ROS2-Project/Roadmap.html">Feuille de route</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../The-ROS2-Project/ROSCon-Content.html">Pourparlers ROSCon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../The-ROS2-Project/Governance.html">Gouvernance du projet</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../The-ROS2-Project/Governance/ROS2-TSC-Charter.html">Charte du comité de pilotage technique ROS 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../The-ROS2-Project/Governance/ROS2-TSC-Intake-process.html">Processus d’admission des candidats ROS 2 TSC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../The-ROS2-Project/Governance/How-To-Start-A-Community-Working-Group.html">Comment démarrer un groupe de travail communautaire</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../The-ROS2-Project/Marketing.html">Commercialisation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../Related-Projects.html">Projets liés</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../Related-Projects/Intel-ROS2-Projects.html">Projets Intel ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../Related-Projects/Nvidia-ROS2-Projects.html">Projets NVIDIA ROS 2</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../Glossary.html">Glossaire</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Citations.html">Citations</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">ROS 2 documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../../Tutorials.html">Tutoriels</a></li>
          <li class="breadcrumb-item"><a href="../../Advanced.html">Avancé</a></li>
          <li class="breadcrumb-item"><a href="Simulation-Main.html">Simulation</a></li>
      <li class="breadcrumb-item active">Mise en place d’une simulation de robot (Webots)</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ros2/ros2_documentation/blob/rolling/source/Tutorials/Advanced/Simulators/Webots.rst" class="fa fa-github"> Éditer sur GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             


  <div class="section" id="setting-up-a-robot-simulation-webots">
<span id="simulators"></span><h1>Mise en place d’une simulation de robot (Webots)<a class="headerlink" href="#setting-up-a-robot-simulation-webots" title="Lien permanent vers ce titre"></a></h1>
<p><strong>Objectif :</strong> Configurez une simulation de robot et contrôlez-la depuis ROS 2.</p>
<p><strong>Niveau du didacticiel :</strong> Avancé</p>
<p><strong>Durée :</strong> 20 minutes</p>
<div class="contents local topic" id="contents">
<p class="topic-title">Contenu</p>
<ul class="simple">
<li><p><a class="reference internal" href="#background" id="id1">Arrière-plan</a></p></li>
<li><p><a class="reference internal" href="#prerequisites" id="id2">Conditions préalables</a></p></li>
<li><p><a class="reference internal" href="#tasks" id="id3">Tâches</a></p>
<ul>
<li><p><a class="reference internal" href="#create-the-package-structure" id="id4">1 Créer la structure du package</a></p></li>
<li><p><a class="reference internal" href="#setup-the-simulation-world" id="id5">2 Configurer le monde de la simulation</a></p></li>
<li><p><a class="reference internal" href="#change-the-my-robot-driver-py-file" id="id6">3 Modifiez le fichier my_robot_driver.py</a></p></li>
<li><p><a class="reference internal" href="#create-the-my-robot-urdf-file" id="id7">4 Créez le fichier my_robot.urdf</a></p></li>
<li><p><a class="reference internal" href="#create-the-launch-file" id="id8">5 Créer le fichier de lancement</a></p></li>
<li><p><a class="reference internal" href="#modify-the-setup-py-file" id="id9">6 Modifiez le fichier setup.py</a></p></li>
<li><p><a class="reference internal" href="#test-the-code" id="id10">7 Testez le code</a></p></li>
<li><p><a class="reference internal" href="#updating-my-robot-urdf" id="id11">8 Mise à jour de mon_robot.urdf</a></p></li>
<li><p><a class="reference internal" href="#creating-a-ros-node-to-avoid-obstacles" id="id12">9 Création d’un nœud ROS pour éviter les obstacles</a></p></li>
<li><p><a class="reference internal" href="#updating-setup-py-and-robot-launch-py" id="id13">10 Mise à jour de setup.py et robot_launch.py</a></p></li>
<li><p><a class="reference internal" href="#test-the-obstacle-avoidance-code" id="id14">11 Testez le code d’évitement d’obstacle</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#summary" id="id15">Résumé</a></p></li>
<li><p><a class="reference internal" href="#next-steps" id="id16">Prochaines étapes</a></p></li>
</ul>
</div>
<div class="section" id="background">
<h2><a class="toc-backref" href="#id1">Arrière-plan</a><a class="headerlink" href="#background" title="Lien permanent vers ce titre"></a></h2>
<p>Plusieurs simulateurs de robots peuvent être utilisés avec ROS 2, tels que Gazebo, Webots, etc. Contrairement à turtlesim, ils fournissent des résultats assez réalistes en s’appuyant sur des modèles basés sur la physique pour les robots, les capteurs, les actionneurs et les objets. Par conséquent, ce que vous observez en simulation est très proche de ce que vous obtiendrez lors du transfert de vos contrôleurs ROS 2 vers un vrai robot. Dans ce didacticiel, vous allez utiliser le simulateur de robot Webots pour configurer et exécuter un scénario de simulation ROS 2 très simple.</p>
<p>Le package <code class="docutils literal notranslate"><span class="pre">webots_ros2</span></code> fournit une interface entre ROS 2 et Webots. Il comprend plusieurs sous-packages, mais dans ce tutoriel, vous allez utiliser uniquement le sous-package <code class="docutils literal notranslate"><span class="pre">webots_ros2_driver</span></code> pour implémenter un plugin Python contrôlant un robot simulé. Certains autres sous-packages contiennent des démos avec différents robots tels que le TurtleBot3. Ils sont documentés dans la page <a class="reference internal" href="../../Demos.html"><span class="doc">Démos</span></a>.</p>
</div>
<div class="section" id="prerequisites">
<h2><a class="toc-backref" href="#id2">Conditions préalables</a><a class="headerlink" href="#prerequisites" title="Lien permanent vers ce titre"></a></h2>
<p>Il est recommandé de comprendre les principes de base de ROS abordés dans le débutant <a class="reference internal" href="../../../Tutorials.html"><span class="doc">Tutoriels</span></a>. En particulier, <a class="reference internal" href="../../Beginner-CLI-Tools/Introducing-Turtlesim/Introducing-Turtlesim.html"><span class="doc">Utiliser turtlesim et rqt</span></a>, <span class="xref std std-doc">../../Beginner-CLI-Tools/Understanding-ROS2-Topics/ Comprendre-ROS2-Sujets</span>, <a class="reference internal" href="../../Beginner-Client-Libraries/Creating-A-Workspace/Creating-A-Workspace.html"><span class="doc">Créer un espace de travail</span></a>, <span class="xref std std-doc">../../Beginner-Client- Libraries/Creating-Your-First-ROS2-Package</span> et <a class="reference internal" href="../../Intermediate/Launch/Creating-Launch-Files.html"><span class="doc">Création d’un fichier de lancement</span></a> sont des prérequis utiles.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-TGludXg=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-TGludXg=" name="TGludXg=" role="tab" tabindex="0">Linux</button><button aria-controls="panel-0-V2luZG93cw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-V2luZG93cw==" name="V2luZG93cw==" role="tab" tabindex="-1">Windows</button><button aria-controls="panel-0-bWFjT1M=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-bWFjT1M=" name="bWFjT1M=" role="tab" tabindex="-1">macOS</button></div><div aria-labelledby="tab-0-TGludXg=" class="sphinx-tabs-panel group-tab" id="panel-0-TGludXg=" name="TGludXg=" role="tabpanel" tabindex="0"><p>Les commandes Linux et ROS de ce tutoriel peuvent être exécutées dans un terminal Linux standard. Voir les <a class="reference external" href="https://github.com/cyberbotics/webots_ros2/wiki/Linux-Installation-Guide">instructions d’installation Webots ROS 2 Linux</a>.</p>
</div><div aria-labelledby="tab-0-V2luZG93cw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-V2luZG93cw==" name="V2luZG93cw==" role="tabpanel" tabindex="0"><p>Les commandes Linux et ROS de ce tutoriel doivent être exécutées dans un environnement WSL (Windows Subsystem for Linux). Voir les <a class="reference external" href="https://github.com/cyberbotics/webots_ros2/wiki/Windows-Installation-Guide">instructions d’installation de Webots ROS 2 Windows</a>.</p>
</div><div aria-labelledby="tab-0-bWFjT1M=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-bWFjT1M=" name="bWFjT1M=" role="tabpanel" tabindex="0"><p>Les commandes Linux et ROS de ce tutoriel doivent être exécutées dans un conteneur Docker personnalisé configuré avec le package <code class="docutils literal notranslate"><span class="pre">webots_ros2_driver</span></code>. Voir les <a class="reference external" href="https://github.com/cyberbotics/webots_ros2/wiki/macOS-Installation-Guide">instructions d’installation de Webots ROS 2 macOS</a>.</p>
</div></div>
<p>Pour installer <code class="docutils literal notranslate"><span class="pre">webots_ros2_driver</span></code> depuis un terminal, procédez avec les commandes suivantes.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo apt update</span>
<span class="go">sudo apt install ros-rolling-webots-ros2-driver</span>
<span class="go">source /opt/ros/rolling/setup.bash</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Si vous souhaitez installer l’ensemble du package <code class="docutils literal notranslate"><span class="pre">webots_ros2</span></code>, suivez ces <a class="reference external" href="https://github.com/cyberbotics/webots_ros2/wiki/Getting-Started">instructions</a>.</p>
</div>
</div>
<div class="section" id="tasks">
<h2><a class="toc-backref" href="#id3">Tâches</a><a class="headerlink" href="#tasks" title="Lien permanent vers ce titre"></a></h2>
<div class="section" id="create-the-package-structure">
<h3><a class="toc-backref" href="#id4">1 Créer la structure du package</a><a class="headerlink" href="#create-the-package-structure" title="Lien permanent vers ce titre"></a></h3>
<p>Organisons le code dans un package ROS 2 personnalisé. Créez un nouveau package nommé <code class="docutils literal notranslate"><span class="pre">my_package</span></code> à partir du dossier <code class="docutils literal notranslate"><span class="pre">src</span></code> de votre espace de travail ROS 2. Changez le répertoire courant de votre terminal en <code class="docutils literal notranslate"><span class="pre">ros2_ws/src</span></code> et exécutez :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ros2 pkg create --build-type ament_python --node-name my_robot_driver my_package --dependencies rclpy geometry_msgs webots_ros2_driver</span>
</pre></div>
</div>
<p>L’option <code class="docutils literal notranslate"><span class="pre">--node-name</span> <span class="pre">my_robot_driver</span></code> créera un modèle de plug-in Python <code class="docutils literal notranslate"><span class="pre">my_robot_driver.py</span></code> dans le sous-dossier <code class="docutils literal notranslate"><span class="pre">my_package</span></code> que vous modifierez ultérieurement. L’option <code class="docutils literal notranslate"><span class="pre">--dependencies</span> <span class="pre">rclpy</span> <span class="pre">geometry_msgs</span> <span class="pre">webots_ros2_driver</span></code> spécifie les packages nécessaires au plugin <code class="docutils literal notranslate"><span class="pre">my_robot_driver.py</span></code> dans le fichier <code class="docutils literal notranslate"><span class="pre">package.xml</span></code>. Ajoutons un dossier <code class="docutils literal notranslate"><span class="pre">launch</span></code> et un dossier <code class="docutils literal notranslate"><span class="pre">worlds</span></code> dans le dossier <code class="docutils literal notranslate"><span class="pre">my_package</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd my_package</span>
<span class="go">mkdir launch</span>
<span class="go">mkdir worlds</span>
</pre></div>
</div>
<p>Vous devriez vous retrouver avec la structure de dossiers suivante :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">src/</span>
<span class="go">└── my_package/</span>
<span class="go">    ├── launch/</span>
<span class="go">    ├── my_package/</span>
<span class="go">    │   ├── __init__.py</span>
<span class="go">    │   └── my_robot_driver.py</span>
<span class="go">    ├── resource/</span>
<span class="go">    │   └── my_package</span>
<span class="go">    ├── test/</span>
<span class="go">    │   ├── test_copyright.py</span>
<span class="go">    │   ├── test_flake8.py</span>
<span class="go">    │   └── test_pep257.py</span>
<span class="go">    ├── worlds/</span>
<span class="go">    ├── package.xml</span>
<span class="go">    ├── setup.cfg</span>
<span class="go">    └── setup.py</span>
</pre></div>
</div>
</div>
<div class="section" id="setup-the-simulation-world">
<h3><a class="toc-backref" href="#id5">2 Configurer le monde de la simulation</a><a class="headerlink" href="#setup-the-simulation-world" title="Lien permanent vers ce titre"></a></h3>
<p>Vous aurez besoin d’un fichier monde contenant un robot pour lancer votre simulation. <a class="reference download internal" download="" href="../../../_downloads/c0d343388f672b7ea879394d1f179ca1/my_world.wbt"><code class="xref download docutils literal notranslate"><span class="pre">Téléchargez</span> <span class="pre">ce</span> <span class="pre">fichier</span> <span class="pre">de</span> <span class="pre">monde</span></code></a> et déplacez-le dans <code class="docutils literal notranslate"><span class="pre">my_package/worlds/</span></code>.</p>
<p>Il s’agit en fait d’un fichier texte assez simple que vous pouvez visualiser dans un éditeur de texte. Un robot simple est déjà inclus dans ce fichier mondial <code class="docutils literal notranslate"><span class="pre">my_world.wbt</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Si vous souhaitez apprendre à créer votre propre modèle de robot dans Webots, vous pouvez consulter ce <a class="reference external" href="https://github.com/cyberbotics/webots_ros2/wiki/Tutorial-Create-Webots-Robot">tutoriel</a>.</p>
</div>
</div>
<div class="section" id="change-the-my-robot-driver-py-file">
<h3><a class="toc-backref" href="#id6">3 Modifiez le fichier my_robot_driver.py</a><a class="headerlink" href="#change-the-my-robot-driver-py-file" title="Lien permanent vers ce titre"></a></h3>
<p>Le sous-paquet <code class="docutils literal notranslate"><span class="pre">webots_ros2_driver</span></code> crée automatiquement une interface ROS 2 pour la plupart des capteurs. Dans cette tâche, vous allez étendre cette interface en modifiant le fichier <code class="docutils literal notranslate"><span class="pre">my_robot_driver.py</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Le but de ce tutoriel est de montrer un exemple de base avec un nombre minimum de dépendances. Cependant, vous pouvez éviter l’utilisation de ce plugin Python en utilisant un autre sous-package <code class="docutils literal notranslate"><span class="pre">webots_ros2</span></code> nommé <code class="docutils literal notranslate"><span class="pre">webots_ros2_control</span></code>, introduisant une nouvelle dépendance. Cet autre sous-paquet crée une interface avec le paquet <code class="docutils literal notranslate"><span class="pre">ros2_control</span></code> qui facilite le contrôle d’un robot à roues différentielles.</p>
</div>
<p>Ouvrez <code class="docutils literal notranslate"><span class="pre">my_package/my_package/my_robot_driver.py</span></code> dans votre éditeur préféré et remplacez son contenu par ce qui suit :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">rclpy</span>
<span class="kn">from</span> <span class="nn">geometry_msgs.msg</span> <span class="kn">import</span> <span class="n">Twist</span>

<span class="n">HALF_DISTANCE_BETWEEN_WHEELS</span> <span class="o">=</span> <span class="mf">0.045</span>
<span class="n">WHEEL_RADIUS</span> <span class="o">=</span> <span class="mf">0.025</span>

<span class="k">class</span> <span class="nc">MyRobotDriver</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">webots_node</span><span class="p">,</span> <span class="n">properties</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__robot</span> <span class="o">=</span> <span class="n">webots_node</span><span class="o">.</span><span class="n">robot</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__left_motor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__robot</span><span class="o">.</span><span class="n">getDevice</span><span class="p">(</span><span class="s1">&#39;left wheel motor&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__right_motor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__robot</span><span class="o">.</span><span class="n">getDevice</span><span class="p">(</span><span class="s1">&#39;right wheel motor&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__left_motor</span><span class="o">.</span><span class="n">setPosition</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__left_motor</span><span class="o">.</span><span class="n">setVelocity</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__right_motor</span><span class="o">.</span><span class="n">setPosition</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__right_motor</span><span class="o">.</span><span class="n">setVelocity</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__target_twist</span> <span class="o">=</span> <span class="n">Twist</span><span class="p">()</span>

        <span class="n">rclpy</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__node</span> <span class="o">=</span> <span class="n">rclpy</span><span class="o">.</span><span class="n">create_node</span><span class="p">(</span><span class="s1">&#39;my_robot_driver&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__node</span><span class="o">.</span><span class="n">create_subscription</span><span class="p">(</span><span class="n">Twist</span><span class="p">,</span> <span class="s1">&#39;cmd_vel&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cmd_vel_callback</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__cmd_vel_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">twist</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__target_twist</span> <span class="o">=</span> <span class="n">twist</span>

    <span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">rclpy</span><span class="o">.</span><span class="n">spin_once</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__node</span><span class="p">,</span> <span class="n">timeout_sec</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">forward_speed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__target_twist</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span>
        <span class="n">angular_speed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__target_twist</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span>

        <span class="n">command_motor_left</span> <span class="o">=</span> <span class="p">(</span><span class="n">forward_speed</span> <span class="o">-</span> <span class="n">angular_speed</span> <span class="o">*</span> <span class="n">HALF_DISTANCE_BETWEEN_WHEELS</span><span class="p">)</span> <span class="o">/</span> <span class="n">WHEEL_RADIUS</span>
        <span class="n">command_motor_right</span> <span class="o">=</span> <span class="p">(</span><span class="n">forward_speed</span> <span class="o">+</span> <span class="n">angular_speed</span> <span class="o">*</span> <span class="n">HALF_DISTANCE_BETWEEN_WHEELS</span><span class="p">)</span> <span class="o">/</span> <span class="n">WHEEL_RADIUS</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__left_motor</span><span class="o">.</span><span class="n">setVelocity</span><span class="p">(</span><span class="n">command_motor_left</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__right_motor</span><span class="o">.</span><span class="n">setVelocity</span><span class="p">(</span><span class="n">command_motor_right</span><span class="p">)</span>
</pre></div>
</div>
<p>Comme vous pouvez le voir, la classe <code class="docutils literal notranslate"><span class="pre">MyRobotDriver</span></code> implémente trois méthodes.</p>
<p>La première méthode, nommée <code class="docutils literal notranslate"><span class="pre">init(self,</span> <span class="pre">...)</span></code>, est en fait l’homologue ROS du constructeur Python <code class="docutils literal notranslate"><span class="pre">__init__(self,</span> <span class="pre">...)</span></code>. Il obtient d’abord l’instance du robot à partir de la simulation (qui peut être utilisée pour accéder à l’API du robot Webots &lt;<a class="reference external" href="https://cyberbotics.com/doc/reference/robot?tab-language=python">https://cyberbotics.com/doc/reference/robot?tab-language=python</a>&gt;`_). Ensuite, il obtient les deux instances de moteur et les initialise avec une position cible et une vitesse cible. Enfin, un nœud ROS est créé et une méthode de rappel est enregistrée pour un sujet ROS nommé <code class="docutils literal notranslate"><span class="pre">/cmd_vel</span></code> qui gérera les messages <code class="docutils literal notranslate"><span class="pre">Twist</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">webots_node</span><span class="p">,</span> <span class="n">properties</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__robot</span> <span class="o">=</span> <span class="n">webots_node</span><span class="o">.</span><span class="n">robot</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">__left_motor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__robot</span><span class="o">.</span><span class="n">getDevice</span><span class="p">(</span><span class="s1">&#39;left wheel motor&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__right_motor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__robot</span><span class="o">.</span><span class="n">getDevice</span><span class="p">(</span><span class="s1">&#39;right wheel motor&#39;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">__left_motor</span><span class="o">.</span><span class="n">setPosition</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__left_motor</span><span class="o">.</span><span class="n">setVelocity</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">__right_motor</span><span class="o">.</span><span class="n">setPosition</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__right_motor</span><span class="o">.</span><span class="n">setVelocity</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">__target_twist</span> <span class="o">=</span> <span class="n">Twist</span><span class="p">()</span>

    <span class="n">rclpy</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__node</span> <span class="o">=</span> <span class="n">rclpy</span><span class="o">.</span><span class="n">create_node</span><span class="p">(</span><span class="s1">&#39;my_robot_driver&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__node</span><span class="o">.</span><span class="n">create_subscription</span><span class="p">(</span><span class="n">Twist</span><span class="p">,</span> <span class="s1">&#39;cmd_vel&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cmd_vel_callback</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Vient ensuite l’implémentation de la méthode privée de callback <code class="docutils literal notranslate"><span class="pre">__cmd_vel_callback(self,</span> <span class="pre">twist)</span></code> qui sera appelée pour chaque message <code class="docutils literal notranslate"><span class="pre">Twist</span></code> reçu sur le sujet <code class="docutils literal notranslate"><span class="pre">/cmd_vel</span></code> et le sauvegardera dans le dossier <code class="docutils literal notranslate"><span class="pre">self</span> <span class="pre">.__target_twist</span></code> variable membre.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">__cmd_vel_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">twist</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__target_twist</span> <span class="o">=</span> <span class="n">twist</span>
</pre></div>
</div>
<p>Enfin, la méthode <code class="docutils literal notranslate"><span class="pre">step(self)</span></code> est appelée à chaque pas de temps de la simulation. L’appel à <code class="docutils literal notranslate"><span class="pre">rclpy.spin_once()</span></code> est nécessaire pour assurer le bon fonctionnement du nœud ROS. A chaque pas de temps, la méthode récupérera les <code class="docutils literal notranslate"><span class="pre">forward_speed</span></code> et <code class="docutils literal notranslate"><span class="pre">angular_speed</span></code> désirés de <code class="docutils literal notranslate"><span class="pre">self.__target_twist</span></code>. Comme les moteurs sont contrôlés avec des vitesses angulaires, la méthode convertira alors les <code class="docutils literal notranslate"><span class="pre">forward_speed</span></code> et <code class="docutils literal notranslate"><span class="pre">angular_speed</span></code> en commandes individuelles pour chaque roue. Cette conversion dépend de la structure du robot, plus précisément du rayon de la roue et de la distance entre elles.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">rclpy</span><span class="o">.</span><span class="n">spin_once</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__node</span><span class="p">,</span> <span class="n">timeout_sec</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">forward_speed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__target_twist</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span>
    <span class="n">angular_speed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__target_twist</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span>

    <span class="n">command_motor_left</span> <span class="o">=</span> <span class="p">(</span><span class="n">forward_speed</span> <span class="o">-</span> <span class="n">angular_speed</span> <span class="o">*</span> <span class="n">HALF_DISTANCE_BETWEEN_WHEELS</span><span class="p">)</span> <span class="o">/</span> <span class="n">WHEEL_RADIUS</span>
    <span class="n">command_motor_right</span> <span class="o">=</span> <span class="p">(</span><span class="n">forward_speed</span> <span class="o">+</span> <span class="n">angular_speed</span> <span class="o">*</span> <span class="n">HALF_DISTANCE_BETWEEN_WHEELS</span><span class="p">)</span> <span class="o">/</span> <span class="n">WHEEL_RADIUS</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">__left_motor</span><span class="o">.</span><span class="n">setVelocity</span><span class="p">(</span><span class="n">command_motor_left</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__right_motor</span><span class="o">.</span><span class="n">setVelocity</span><span class="p">(</span><span class="n">command_motor_right</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="create-the-my-robot-urdf-file">
<h3><a class="toc-backref" href="#id7">4 Créez le fichier my_robot.urdf</a><a class="headerlink" href="#create-the-my-robot-urdf-file" title="Lien permanent vers ce titre"></a></h3>
<p>Vous devez maintenant créer un fichier URDF pour déclarer le plugin Python <code class="docutils literal notranslate"><span class="pre">my_robot_driver.py</span></code>. Cela permettra au nœud ROS <code class="docutils literal notranslate"><span class="pre">webots_ros2_driver</span></code> de lancer le plugin.</p>
<p>Dans le dossier <code class="docutils literal notranslate"><span class="pre">my_package/resource</span></code> créez un fichier texte nommé <code class="docutils literal notranslate"><span class="pre">my_robot.urdf</span></code> avec ce contenu :</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;My robot&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;webots&gt;</span>
<span class="w">        </span><span class="nt">&lt;plugin</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;my_package.my_robot_driver.MyRobotDriver&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/webots&gt;</span>
<span class="nt">&lt;/robot&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ce fichier URDF simple ne contient aucun lien ou information conjointe sur le robot car il n’est pas nécessaire dans ce didacticiel. Cependant, les fichiers URDF contiennent généralement beaucoup plus d’informations, comme expliqué dans le <a class="reference internal" href="../../Intermediate/URDF/URDF-Main.html"><span class="doc">URDF</span></a>.</p>
</div>
</div>
<div class="section" id="create-the-launch-file">
<h3><a class="toc-backref" href="#id8">5 Créer le fichier de lancement</a><a class="headerlink" href="#create-the-launch-file" title="Lien permanent vers ce titre"></a></h3>
<p>Créons maintenant le fichier de lancement pour lancer facilement la simulation et le contrôleur ROS avec une seule commande. Dans le dossier <code class="docutils literal notranslate"><span class="pre">my_package/launch</span></code> créez un nouveau fichier texte nommé <code class="docutils literal notranslate"><span class="pre">robot_launch.py</span></code> avec ce code :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pathlib</span>
<span class="kn">import</span> <span class="nn">launch</span>
<span class="kn">from</span> <span class="nn">launch_ros.actions</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="nn">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="nn">ament_index_python.packages</span> <span class="kn">import</span> <span class="n">get_package_share_directory</span>
<span class="kn">from</span> <span class="nn">webots_ros2_driver.webots_launcher</span> <span class="kn">import</span> <span class="n">WebotsLauncher</span><span class="p">,</span> <span class="n">Ros2SupervisorLauncher</span>
<span class="kn">from</span> <span class="nn">webots_ros2_driver.utils</span> <span class="kn">import</span> <span class="n">controller_url_prefix</span>


<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
    <span class="n">package_dir</span> <span class="o">=</span> <span class="n">get_package_share_directory</span><span class="p">(</span><span class="s1">&#39;my_package&#39;</span><span class="p">)</span>
    <span class="n">robot_description</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">package_dir</span><span class="p">,</span> <span class="s1">&#39;resource&#39;</span><span class="p">,</span> <span class="s1">&#39;my_robot.urdf&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>

    <span class="n">webots</span> <span class="o">=</span> <span class="n">WebotsLauncher</span><span class="p">(</span>
        <span class="n">world</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">package_dir</span><span class="p">,</span> <span class="s1">&#39;worlds&#39;</span><span class="p">,</span> <span class="s1">&#39;my_world.wbt&#39;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">ros2_supervisor</span> <span class="o">=</span> <span class="n">Ros2SupervisorLauncher</span><span class="p">()</span>

    <span class="n">my_robot_driver</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span>
        <span class="n">package</span><span class="o">=</span><span class="s1">&#39;webots_ros2_driver&#39;</span><span class="p">,</span>
        <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;driver&#39;</span><span class="p">,</span>
        <span class="n">output</span><span class="o">=</span><span class="s1">&#39;screen&#39;</span><span class="p">,</span>
        <span class="n">additional_env</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;WEBOTS_CONTROLLER_URL&#39;</span><span class="p">:</span> <span class="n">controller_url_prefix</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;my_robot&#39;</span><span class="p">},</span>
        <span class="n">parameters</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span><span class="s1">&#39;robot_description&#39;</span><span class="p">:</span> <span class="n">robot_description</span><span class="p">},</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">LaunchDescription</span><span class="p">([</span>
        <span class="n">webots</span><span class="p">,</span>
        <span class="n">my_robot_driver</span><span class="p">,</span>
        <span class="n">ros2_supervisor</span><span class="p">,</span>
        <span class="n">launch</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">RegisterEventHandler</span><span class="p">(</span>
            <span class="n">event_handler</span><span class="o">=</span><span class="n">launch</span><span class="o">.</span><span class="n">event_handlers</span><span class="o">.</span><span class="n">OnProcessExit</span><span class="p">(</span>
                <span class="n">target_action</span><span class="o">=</span><span class="n">webots</span><span class="p">,</span>
                <span class="n">on_exit</span><span class="o">=</span><span class="p">[</span><span class="n">launch</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">EmitEvent</span><span class="p">(</span><span class="n">event</span><span class="o">=</span><span class="n">launch</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">Shutdown</span><span class="p">())],</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">])</span>
</pre></div>
</div>
<p>L’objet <code class="docutils literal notranslate"><span class="pre">WebotsLauncher</span></code> est une action personnalisée qui vous permet de démarrer une instance de simulation Webots. Vous devez spécifier dans le constructeur quel fichier monde le simulateur ouvrira.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">webots</span> <span class="o">=</span> <span class="n">WebotsLauncher</span><span class="p">(</span>
    <span class="n">world</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">package_dir</span><span class="p">,</span> <span class="s1">&#39;worlds&#39;</span><span class="p">,</span> <span class="s1">&#39;my_world.wbt&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Un Robot superviseur est toujours automatiquement ajouté au fichier monde par <code class="docutils literal notranslate"><span class="pre">WebotsLauncher</span></code>. Ce robot est contrôlé par le nœud personnalisé <code class="docutils literal notranslate"><span class="pre">Ros2Supervisor</span></code>, qui doit également être démarré à l’aide de <code class="docutils literal notranslate"><span class="pre">Ros2SupervisorLauncher</span></code>. Ce nœud permet de générer des robots URDF directement dans le monde, et il publie également des sujets utiles comme <code class="docutils literal notranslate"><span class="pre">/clock</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ros2_supervisor</span> <span class="o">=</span> <span class="n">Ros2SupervisorLauncher</span><span class="p">()</span>
</pre></div>
</div>
<p>Ensuite, le nœud ROS interagissant avec le robot simulé est créé. Ce nœud, nommé <code class="docutils literal notranslate"><span class="pre">driver</span></code>, est situé dans le package <code class="docutils literal notranslate"><span class="pre">webots_ros2_driver</span></code>.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-TGludXg=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-1-TGludXg=" name="TGludXg=" role="tab" tabindex="0">Linux</button><button aria-controls="panel-1-V2luZG93cw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-V2luZG93cw==" name="V2luZG93cw==" role="tab" tabindex="-1">Windows</button><button aria-controls="panel-1-bWFjT1M=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-bWFjT1M=" name="bWFjT1M=" role="tab" tabindex="-1">macOS</button></div><div aria-labelledby="tab-1-TGludXg=" class="sphinx-tabs-panel group-tab" id="panel-1-TGludXg=" name="TGludXg=" role="tabpanel" tabindex="0"><p>Le nœud pourra communiquer avec le robot simulé en utilisant un protocole personnalisé basé sur IPC et la mémoire partagée.</p>
</div><div aria-labelledby="tab-1-V2luZG93cw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-V2luZG93cw==" name="V2luZG93cw==" role="tabpanel" tabindex="0"><p>Le nœud (dans WSL) pourra communiquer avec le robot simulé (dans Webots sous Windows) via une connexion TCP.</p>
</div><div aria-labelledby="tab-1-bWFjT1M=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-bWFjT1M=" name="bWFjT1M=" role="tabpanel" tabindex="0"><p>Le nœud (dans le conteneur docker) pourra communiquer avec le robot simulé (dans Webots sur macOS) via une connexion TCP.</p>
</div></div>
<p>Dans votre cas, vous devez exécuter une seule instance de ce nœud, car vous avez un seul robot dans la simulation. Mais si vous aviez plus de robots dans la simulation, vous devriez exécuter une instance de ce nœud par robot. <code class="docutils literal notranslate"><span class="pre">WEBOTS_CONTROLLER_URL</span></code> est utilisé pour définir le nom du robot auquel le pilote doit se connecter. La méthode <code class="docutils literal notranslate"><span class="pre">controller_url_prefix()</span></code> est obligatoire, car elle permet à <code class="docutils literal notranslate"><span class="pre">webots_ros2_driver</span></code> d’ajouter le préfixe de protocole correct en fonction de votre plate-forme. Le paramètre <code class="docutils literal notranslate"><span class="pre">robot_description</span></code> contient le contenu du fichier URDF qui fait référence au plugin Python <code class="docutils literal notranslate"><span class="pre">my_robot_driver.py</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_robot_driver</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span>
    <span class="n">package</span><span class="o">=</span><span class="s1">&#39;webots_ros2_driver&#39;</span><span class="p">,</span>
    <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;driver&#39;</span><span class="p">,</span>
    <span class="n">output</span><span class="o">=</span><span class="s1">&#39;screen&#39;</span><span class="p">,</span>
    <span class="n">additional_env</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;WEBOTS_CONTROLLER_URL&#39;</span><span class="p">:</span> <span class="n">controller_url_prefix</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;my_robot&#39;</span><span class="p">},</span>
    <span class="n">parameters</span><span class="o">=</span><span class="p">[</span>
        <span class="p">{</span><span class="s1">&#39;robot_description&#39;</span><span class="p">:</span> <span class="n">robot_description</span><span class="p">},</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Après cela, les trois nœuds sont configurés pour être lancés dans le constructeur <code class="docutils literal notranslate"><span class="pre">LaunchDescription</span></code> :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="n">LaunchDescription</span><span class="p">([</span>
    <span class="n">webots</span><span class="p">,</span>
    <span class="n">my_robot_driver</span><span class="p">,</span>
    <span class="n">ros2_supervisor</span><span class="p">,</span>
</pre></div>
</div>
<p>Enfin, une partie facultative est ajoutée afin d’arrêter tous les nœuds une fois que Webots se termine (par exemple, lorsqu’il est fermé à partir de l’interface utilisateur graphique).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">launch</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">RegisterEventHandler</span><span class="p">(</span>
    <span class="n">event_handler</span><span class="o">=</span><span class="n">launch</span><span class="o">.</span><span class="n">event_handlers</span><span class="o">.</span><span class="n">OnProcessExit</span><span class="p">(</span>
        <span class="n">target_action</span><span class="o">=</span><span class="n">webots</span><span class="p">,</span>
        <span class="n">on_exit</span><span class="o">=</span><span class="p">[</span><span class="n">launch</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">EmitEvent</span><span class="p">(</span><span class="n">event</span><span class="o">=</span><span class="n">launch</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">Shutdown</span><span class="p">())],</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="modify-the-setup-py-file">
<h3><a class="toc-backref" href="#id9">6 Modifiez le fichier setup.py</a><a class="headerlink" href="#modify-the-setup-py-file" title="Lien permanent vers ce titre"></a></h3>
<p>Enfin, avant de pouvoir démarrer le fichier de lancement, vous devez modifier le fichier <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> pour inclure les fichiers supplémentaires que vous avez ajoutés. Ouvrez <code class="docutils literal notranslate"><span class="pre">my_package/setup.py</span></code> et remplacez son contenu par :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>

<span class="n">package_name</span> <span class="o">=</span> <span class="s1">&#39;my_package&#39;</span>
<span class="n">data_files</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">data_files</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;share/ament_index/resource_index/packages&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;resource/&#39;</span> <span class="o">+</span> <span class="n">package_name</span><span class="p">]))</span>
<span class="n">data_files</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;share/&#39;</span> <span class="o">+</span> <span class="n">package_name</span> <span class="o">+</span> <span class="s1">&#39;/launch&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;launch/robot_launch.py&#39;</span><span class="p">]))</span>
<span class="n">data_files</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;share/&#39;</span> <span class="o">+</span> <span class="n">package_name</span> <span class="o">+</span> <span class="s1">&#39;/worlds&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;worlds/my_world.wbt&#39;</span><span class="p">]))</span>
<span class="n">data_files</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;share/&#39;</span> <span class="o">+</span> <span class="n">package_name</span> <span class="o">+</span> <span class="s1">&#39;/resource&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;resource/my_robot.urdf&#39;</span><span class="p">]))</span>
<span class="n">data_files</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;share/&#39;</span> <span class="o">+</span> <span class="n">package_name</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;package.xml&#39;</span><span class="p">]))</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="n">package_name</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s1">&#39;0.0.0&#39;</span><span class="p">,</span>
    <span class="n">packages</span><span class="o">=</span><span class="p">[</span><span class="n">package_name</span><span class="p">],</span>
    <span class="n">data_files</span><span class="o">=</span><span class="n">data_files</span><span class="p">,</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;setuptools&#39;</span><span class="p">],</span>
    <span class="n">zip_safe</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">maintainer</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span>
    <span class="n">maintainer_email</span><span class="o">=</span><span class="s1">&#39;user.name@mail.com&#39;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;TODO: Package description&#39;</span><span class="p">,</span>
    <span class="n">license</span><span class="o">=</span><span class="s1">&#39;TODO: License declaration&#39;</span><span class="p">,</span>
    <span class="n">tests_require</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;pytest&#39;</span><span class="p">],</span>
    <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;console_scripts&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s1">&#39;my_robot_driver = my_package.my_robot_driver:main&#39;</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Cela configure le paquet et ajoute dans la variable <code class="docutils literal notranslate"><span class="pre">data_files</span></code> les fichiers nouvellement ajoutés : <code class="docutils literal notranslate"><span class="pre">my_world.wbt</span></code>, <code class="docutils literal notranslate"><span class="pre">my_robot.urdf</span></code> et <code class="docutils literal notranslate"><span class="pre">robot_launch.py</span></code>.</p>
</div>
<div class="section" id="test-the-code">
<h3><a class="toc-backref" href="#id10">7 Testez le code</a><a class="headerlink" href="#test-the-code" title="Lien permanent vers ce titre"></a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-TGludXg=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-2-TGludXg=" name="TGludXg=" role="tab" tabindex="0">Linux</button><button aria-controls="panel-2-V2luZG93cw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-V2luZG93cw==" name="V2luZG93cw==" role="tab" tabindex="-1">Windows</button><button aria-controls="panel-2-bWFjT1M=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-bWFjT1M=" name="bWFjT1M=" role="tab" tabindex="-1">macOS</button></div><div aria-labelledby="tab-2-TGludXg=" class="sphinx-tabs-panel group-tab" id="panel-2-TGludXg=" name="TGludXg=" role="tabpanel" tabindex="0"><p>Depuis un terminal de votre espace de travail ROS 2, exécutez :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">colcon build</span>
<span class="go">source install/local_setup.bash</span>
<span class="go">ros2 launch my_package robot_launch.py</span>
</pre></div>
</div>
<p>Cela lancera la simulation. Webots sera automatiquement installé lors de la première exécution au cas où il n’était pas déjà installé.</p>
</div><div aria-labelledby="tab-2-V2luZG93cw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-V2luZG93cw==" name="V2luZG93cw==" role="tabpanel" tabindex="0"><p>Depuis un terminal de votre espace de travail WSL ROS 2, exécutez :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">colcon build</span>
<span class="go">export WEBOTS_HOME=/mnt/c/Program\ Files/Webots</span>
<span class="go">source install/local_setup.bash</span>
<span class="go">ros2 launch my_package robot_launch.py</span>
</pre></div>
</div>
<p>Assurez-vous d’utiliser le préfixe <code class="docutils literal notranslate"><span class="pre">/mnt</span></code> devant votre chemin d’accès au dossier d’installation Webots pour accéder au système de fichiers Windows à partir de WSL.</p>
<p>Cela lancera la simulation. Webots sera automatiquement installé lors de la première exécution au cas où il n’était pas déjà installé.</p>
</div><div aria-labelledby="tab-2-bWFjT1M=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-bWFjT1M=" name="bWFjT1M=" role="tabpanel" tabindex="0"><p>Sur macOS, un serveur local doit être démarré sur l’hôte pour démarrer les Webots à partir du conteneur Docker. Le serveur local peut être téléchargé <a class="reference external" href="https://github.com/cyberbotics/webots-server/blob/main/local_simulation_server.py">sur le référentiel webots-server</a>.</p>
<p>Dans un terminal de la machine hôte (pas dans le conteneur), spécifiez le dossier d’installation de Webots (par exemple <code class="docutils literal notranslate"><span class="pre">/Applications/Webots.app</span></code>) et démarrez le serveur à l’aide des commandes suivantes :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export WEBOTS_HOME=/Applications/Webots.app</span>
<span class="go">python3 local_simulation_server.py</span>
</pre></div>
</div>
<p>Depuis le terminal du conteneur Docker, construisez et lancez votre package personnalisé avec :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~/ros2_ws</span>
<span class="go">colcon build</span>
<span class="go">source install/local_setup.bash</span>
<span class="go">ros2 launch my_package robot_launch.py</span>
</pre></div>
</div>
</div></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Si vous souhaitez installer Webots manuellement, vous pouvez le télécharger <a class="reference external" href="https://github.com/cyberbotics/webots/releases/latest">ici</a>.</p>
</div>
<p>Ensuite, ouvrez un deuxième terminal et envoyez une commande avec :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ros2 topic pub /cmd_vel geometry_msgs/Twist  &quot;linear: { x: 0.1 }&quot;</span>
</pre></div>
</div>
<p>Le robot avance maintenant.</p>
<img alt="../../../_images/Robot_moving_forward.png" src="../../../_images/Robot_moving_forward.png" />
<p>À ce stade, le robot est capable de suivre aveuglément vos commandes motrices. Mais il finira par se cogner contre le mur lorsque vous lui ordonnez d’avancer.</p>
<img alt="../../../_images/Robot_colliding_wall.png" src="../../../_images/Robot_colliding_wall.png" />
<p>Pour éviter cela, utilisons les capteurs du robot pour détecter les obstacles et les éviter. Fermez la fenêtre Webots, cela devrait également arrêter vos nœuds ROS démarrés à partir du lanceur. Fermez également la commande de sujet avec <code class="docutils literal notranslate"><span class="pre">Ctrl+C</span></code> dans le second terminal.</p>
</div>
<div class="section" id="updating-my-robot-urdf">
<h3><a class="toc-backref" href="#id11">8 Mise à jour de mon_robot.urdf</a><a class="headerlink" href="#updating-my-robot-urdf" title="Lien permanent vers ce titre"></a></h3>
<p>Vous devez modifier le fichier URDF afin d’activer les capteurs. Dans <code class="docutils literal notranslate"><span class="pre">my_robot.urdf</span></code> remplacez tout le contenu par :</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<span class="nt">&lt;robot</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;My robot&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;webots&gt;</span>
<span class="w">        </span><span class="nt">&lt;device</span><span class="w"> </span><span class="na">reference=</span><span class="s">&quot;ds0&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;DistanceSensor&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;ros&gt;</span>
<span class="w">                </span><span class="nt">&lt;topicName&gt;</span>/left_sensor<span class="nt">&lt;/topicName&gt;</span>
<span class="w">                </span><span class="nt">&lt;alwaysOn&gt;</span>true<span class="nt">&lt;/alwaysOn&gt;</span>
<span class="w">            </span><span class="nt">&lt;/ros&gt;</span>
<span class="w">        </span><span class="nt">&lt;/device&gt;</span>
<span class="w">        </span><span class="nt">&lt;device</span><span class="w"> </span><span class="na">reference=</span><span class="s">&quot;ds1&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;DistanceSensor&quot;</span><span class="nt">&gt;</span>
<span class="w">            </span><span class="nt">&lt;ros&gt;</span>
<span class="w">                </span><span class="nt">&lt;topicName&gt;</span>/right_sensor<span class="nt">&lt;/topicName&gt;</span>
<span class="w">                </span><span class="nt">&lt;alwaysOn&gt;</span>true<span class="nt">&lt;/alwaysOn&gt;</span>
<span class="w">            </span><span class="nt">&lt;/ros&gt;</span>
<span class="w">        </span><span class="nt">&lt;/device&gt;</span>
<span class="w">        </span><span class="nt">&lt;plugin</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;my_package.my_robot_driver.MyRobotDriver&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/webots&gt;</span>
<span class="nt">&lt;/robot&gt;</span>
</pre></div>
</div>
<p>L’interface ROS 2 analysera les balises <code class="docutils literal notranslate"><span class="pre">&lt;device&gt;</span></code> faisant référence aux nœuds <strong>DistanceSensor</strong> et utilisera les paramètres standard dans les balises <code class="docutils literal notranslate"><span class="pre">&lt;ros&gt;</span></code> pour activer les capteurs et nommer leurs sujets.</p>
</div>
<div class="section" id="creating-a-ros-node-to-avoid-obstacles">
<h3><a class="toc-backref" href="#id12">9 Création d’un nœud ROS pour éviter les obstacles</a><a class="headerlink" href="#creating-a-ros-node-to-avoid-obstacles" title="Lien permanent vers ce titre"></a></h3>
<p>Le robot utilisera un nœud ROS standard pour détecter le mur et envoyer des commandes de moteur pour l’éviter. Dans le dossier <code class="docutils literal notranslate"><span class="pre">my_package/my_package/</span></code>, créez un fichier nommé <code class="docutils literal notranslate"><span class="pre">obstacle_avoider.py</span></code> avec ce code :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">rclpy</span>
<span class="kn">from</span> <span class="nn">rclpy.node</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="nn">sensor_msgs.msg</span> <span class="kn">import</span> <span class="n">Range</span>
<span class="kn">from</span> <span class="nn">geometry_msgs.msg</span> <span class="kn">import</span> <span class="n">Twist</span>


<span class="n">MAX_RANGE</span> <span class="o">=</span> <span class="mf">0.15</span>


<span class="k">class</span> <span class="nc">ObstacleAvoider</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">&#39;obstacle_avoider&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__publisher</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_publisher</span><span class="p">(</span><span class="n">Twist</span><span class="p">,</span> <span class="s1">&#39;cmd_vel&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">create_subscription</span><span class="p">(</span><span class="n">Range</span><span class="p">,</span> <span class="s1">&#39;left_sensor&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__left_sensor_callback</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_subscription</span><span class="p">(</span><span class="n">Range</span><span class="p">,</span> <span class="s1">&#39;right_sensor&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__right_sensor_callback</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__left_sensor_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__left_sensor_value</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">range</span>

    <span class="k">def</span> <span class="nf">__right_sensor_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__right_sensor_value</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">range</span>

        <span class="n">command_message</span> <span class="o">=</span> <span class="n">Twist</span><span class="p">()</span>

        <span class="n">command_message</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.1</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__left_sensor_value</span> <span class="o">&lt;</span> <span class="mf">0.9</span> <span class="o">*</span> <span class="n">MAX_RANGE</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">__right_sensor_value</span> <span class="o">&lt;</span> <span class="mf">0.9</span> <span class="o">*</span> <span class="n">MAX_RANGE</span><span class="p">:</span>
            <span class="n">command_message</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="o">-</span><span class="mf">2.0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">command_message</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">rclpy</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">)</span>
    <span class="n">avoider</span> <span class="o">=</span> <span class="n">ObstacleAvoider</span><span class="p">()</span>
    <span class="n">rclpy</span><span class="o">.</span><span class="n">spin</span><span class="p">(</span><span class="n">avoider</span><span class="p">)</span>
    <span class="c1"># Destroy the node explicitly</span>
    <span class="c1"># (optional - otherwise it will be done automatically</span>
    <span class="c1"># when the garbage collector destroys the node object)</span>
    <span class="n">avoider</span><span class="o">.</span><span class="n">destroy_node</span><span class="p">()</span>
    <span class="n">rclpy</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>Ce nœud créera un éditeur pour la commande et s’abonnera aux sujets des capteurs ici :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">__publisher</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_publisher</span><span class="p">(</span><span class="n">Twist</span><span class="p">,</span> <span class="s1">&#39;cmd_vel&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="bp">self</span><span class="o">.</span><span class="n">create_subscription</span><span class="p">(</span><span class="n">Range</span><span class="p">,</span> <span class="s1">&#39;left_sensor&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__left_sensor_callback</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">create_subscription</span><span class="p">(</span><span class="n">Range</span><span class="p">,</span> <span class="s1">&#39;right_sensor&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__right_sensor_callback</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Lorsqu’une mesure est reçue du capteur gauche, elle est copiée dans un champ membre :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">__left_sensor_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__left_sensor_value</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">range</span>
</pre></div>
</div>
<p>Enfin, un message sera envoyé à la rubrique <code class="docutils literal notranslate"><span class="pre">/cmd_vel</span></code> lors de la réception d’une mesure du capteur droit. Le <code class="docutils literal notranslate"><span class="pre">command_message</span></code> enregistrera au moins une vitesse d’avancement dans <code class="docutils literal notranslate"><span class="pre">linear.x</span></code> afin de faire bouger le robot lorsqu’aucun obstacle n’est détecté. Si l’un des deux capteurs détecte un obstacle, <code class="docutils literal notranslate"><span class="pre">command_message</span></code> enregistrera également une vitesse de rotation dans <code class="docutils literal notranslate"><span class="pre">angular.z</span></code> afin de faire tourner le robot à droite.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">__right_sensor_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__right_sensor_value</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">range</span>

    <span class="n">command_message</span> <span class="o">=</span> <span class="n">Twist</span><span class="p">()</span>

    <span class="n">command_message</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.1</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__left_sensor_value</span> <span class="o">&lt;</span> <span class="mf">0.9</span> <span class="o">*</span> <span class="n">MAX_RANGE</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">__right_sensor_value</span> <span class="o">&lt;</span> <span class="mf">0.9</span> <span class="o">*</span> <span class="n">MAX_RANGE</span><span class="p">:</span>
        <span class="n">command_message</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="o">-</span><span class="mf">2.0</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">__publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">command_message</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="updating-setup-py-and-robot-launch-py">
<h3><a class="toc-backref" href="#id13">10 Mise à jour de setup.py et robot_launch.py</a><a class="headerlink" href="#updating-setup-py-and-robot-launch-py" title="Lien permanent vers ce titre"></a></h3>
<p>Vous devez modifier ces deux autres fichiers pour lancer votre nouveau nœud. Modifiez <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> et remplacez <code class="docutils literal notranslate"><span class="pre">'console_scripts'</span></code> par :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;console_scripts&#39;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s1">&#39;my_robot_driver = my_package.my_robot_driver:main&#39;</span><span class="p">,</span>
    <span class="s1">&#39;obstacle_avoider = my_package.obstacle_avoider:main&#39;</span>
<span class="p">],</span>
</pre></div>
</div>
<p>Cela ajoutera un point d’entrée pour le nœud <code class="docutils literal notranslate"><span class="pre">obstacle_avoider</span></code>.</p>
<p>Allez dans le fichier <code class="docutils literal notranslate"><span class="pre">robot_launch.py</span></code> et remplacez <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">generate_launch_description():</span></code> par :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
    <span class="n">package_dir</span> <span class="o">=</span> <span class="n">get_package_share_directory</span><span class="p">(</span><span class="s1">&#39;my_package&#39;</span><span class="p">)</span>
    <span class="n">robot_description</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">package_dir</span><span class="p">,</span> <span class="s1">&#39;resource&#39;</span><span class="p">,</span> <span class="s1">&#39;my_robot.urdf&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>

    <span class="n">webots</span> <span class="o">=</span> <span class="n">WebotsLauncher</span><span class="p">(</span>
        <span class="n">world</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">package_dir</span><span class="p">,</span> <span class="s1">&#39;worlds&#39;</span><span class="p">,</span> <span class="s1">&#39;my_world.wbt&#39;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">ros2_supervisor</span> <span class="o">=</span> <span class="n">Ros2SupervisorLauncher</span><span class="p">()</span>

    <span class="n">my_robot_driver</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span>
        <span class="n">package</span><span class="o">=</span><span class="s1">&#39;webots_ros2_driver&#39;</span><span class="p">,</span>
        <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;driver&#39;</span><span class="p">,</span>
        <span class="n">output</span><span class="o">=</span><span class="s1">&#39;screen&#39;</span><span class="p">,</span>
        <span class="n">additional_env</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;WEBOTS_CONTROLLER_URL&#39;</span><span class="p">:</span> <span class="n">controller_url_prefix</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;my_robot&#39;</span><span class="p">},</span>
        <span class="n">parameters</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span><span class="s1">&#39;robot_description&#39;</span><span class="p">:</span> <span class="n">robot_description</span><span class="p">},</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="n">obstacle_avoider</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span>
        <span class="n">package</span><span class="o">=</span><span class="s1">&#39;my_package&#39;</span><span class="p">,</span>
        <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;obstacle_avoider&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">LaunchDescription</span><span class="p">([</span>
        <span class="n">webots</span><span class="p">,</span>
        <span class="n">my_robot_driver</span><span class="p">,</span>
        <span class="n">ros2_supervisor</span><span class="p">,</span>
        <span class="n">obstacle_avoider</span><span class="p">,</span>
        <span class="n">launch</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">RegisterEventHandler</span><span class="p">(</span>
            <span class="n">event_handler</span><span class="o">=</span><span class="n">launch</span><span class="o">.</span><span class="n">event_handlers</span><span class="o">.</span><span class="n">OnProcessExit</span><span class="p">(</span>
                <span class="n">target_action</span><span class="o">=</span><span class="n">webots</span><span class="p">,</span>
                <span class="n">on_exit</span><span class="o">=</span><span class="p">[</span><span class="n">launch</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">EmitEvent</span><span class="p">(</span><span class="n">event</span><span class="o">=</span><span class="n">launch</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">Shutdown</span><span class="p">())],</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">])</span>
</pre></div>
</div>
<p>Cela créera un nœud <code class="docutils literal notranslate"><span class="pre">obstacle_avoider</span></code> qui sera inclus dans la <code class="docutils literal notranslate"><span class="pre">LaunchDescription</span></code>.</p>
</div>
<div class="section" id="test-the-obstacle-avoidance-code">
<h3><a class="toc-backref" href="#id14">11 Testez le code d’évitement d’obstacle</a><a class="headerlink" href="#test-the-obstacle-avoidance-code" title="Lien permanent vers ce titre"></a></h3>
<p>Comme dans la tâche <code class="docutils literal notranslate"><span class="pre">7</span></code>, lancez la simulation depuis un terminal dans votre espace de travail ROS 2 :</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-TGludXg=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-3-TGludXg=" name="TGludXg=" role="tab" tabindex="0">Linux</button><button aria-controls="panel-3-V2luZG93cw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-V2luZG93cw==" name="V2luZG93cw==" role="tab" tabindex="-1">Windows</button><button aria-controls="panel-3-bWFjT1M=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-bWFjT1M=" name="bWFjT1M=" role="tab" tabindex="-1">macOS</button></div><div aria-labelledby="tab-3-TGludXg=" class="sphinx-tabs-panel group-tab" id="panel-3-TGludXg=" name="TGludXg=" role="tabpanel" tabindex="0"><p>Depuis un terminal de votre espace de travail ROS 2, exécutez :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">colcon build</span>
<span class="go">source install/local_setup.bash</span>
<span class="go">ros2 launch my_package robot_launch.py</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-3-V2luZG93cw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-V2luZG93cw==" name="V2luZG93cw==" role="tabpanel" tabindex="0"><p>Depuis un terminal de votre espace de travail WSL ROS 2, exécutez :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">colcon build</span>
<span class="go">export WEBOTS_HOME=/mnt/c/Program\ Files/Webots</span>
<span class="go">source install/local_setup.bash</span>
<span class="go">ros2 launch my_package robot_launch.py</span>
</pre></div>
</div>
<p>Assurez-vous d’utiliser le préfixe <code class="docutils literal notranslate"><span class="pre">/mnt</span></code> devant votre chemin d’accès au dossier d’installation Webots pour accéder au système de fichiers Windows à partir de WSL.</p>
</div><div aria-labelledby="tab-3-bWFjT1M=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-bWFjT1M=" name="bWFjT1M=" role="tabpanel" tabindex="0"><p>Dans un terminal de la machine hôte (pas dans le conteneur), si ce n’est déjà fait, spécifiez le dossier d’installation de Webots (par exemple <code class="docutils literal notranslate"><span class="pre">/Applications/Webots.app</span></code>) et démarrez le serveur à l’aide des commandes suivantes :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export WEBOTS_HOME=/Applications/Webots.app</span>
<span class="go">python3 local_simulation_server.py</span>
</pre></div>
</div>
<p>Notez que le serveur continue de fonctionner une fois que les nœuds ROS 2 sont terminés. Vous n’avez pas besoin de le redémarrer à chaque fois que vous souhaitez lancer une nouvelle simulation. Depuis le terminal du conteneur Docker, construisez et lancez votre package personnalisé avec :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~/ros2_ws</span>
<span class="go">colcon build</span>
<span class="go">source install/local_setup.bash</span>
<span class="go">ros2 launch my_package robot_launch.py</span>
</pre></div>
</div>
</div></div>
<p>Votre robot doit avancer et avant de toucher le mur, il doit tourner dans le sens des aiguilles d’une montre. Vous pouvez appuyer sur <code class="docutils literal notranslate"><span class="pre">Ctrl+F10</span></code> dans Webots ou aller dans le menu <code class="docutils literal notranslate"><span class="pre">View</span></code>, <code class="docutils literal notranslate"><span class="pre">Optional</span> <span class="pre">Rendering</span></code> et <code class="docutils literal notranslate"><span class="pre">Show</span> <span class="pre">DistanceSensor</span> <span class="pre">Rays</span></code> pour afficher la portée des capteurs de distance du robot.</p>
<img alt="../../../_images/Robot_turning_clockwise.png" src="../../../_images/Robot_turning_clockwise.png" />
</div>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id15">Résumé</a><a class="headerlink" href="#summary" title="Lien permanent vers ce titre"></a></h2>
<p>Dans ce didacticiel, vous avez configuré une simulation de robot réaliste avec Webots, implémenté un plugin Python pour contrôler les moteurs du robot et implémenté un nœud ROS utilisant les capteurs pour éviter les obstacles.</p>
</div>
<div class="section" id="next-steps">
<h2><a class="toc-backref" href="#id16">Prochaines étapes</a><a class="headerlink" href="#next-steps" title="Lien permanent vers ce titre"></a></h2>
<p>Vous voudrez peut-être améliorer le plugin ou créer de nouveaux nœuds pour modifier le comportement du robot. S’inspirer de ces tutoriels précédents pourrait être un point de départ :</p>
<ul class="simple">
<li><p><a class="reference internal" href="../Recording-A-Bag-From-Your-Own-Node-Py.html"><span class="doc">Enregistrer un sac à partir d’un nœud (Python)</span></a>.</p></li>
<li><p><span class="xref std std-doc">../../Intermédiaire/Tf2/Tf2-Main</span>.</p></li>
</ul>
</div>
</div>



           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pied de page">
        <a href="Simulation-Main.html" class="btn btn-neutral float-left" title="Simulation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Précédent</a>
        <a href="Gazebo.html" class="btn btn-neutral float-right" title="Mise en place d’une simulation de robot (Gazebo)" accesskey="n" rel="next">Suivant <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Open Robotics.</p>
  </div>

  Compilé avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">thème</a>
    fourni par <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-17821189-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-17821189-2', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>