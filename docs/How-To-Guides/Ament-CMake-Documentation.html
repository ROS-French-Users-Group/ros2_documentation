<!DOCTYPE html>
<html class="writer-html5" lang="fr" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>documentation utilisateur ament_cmake &mdash; Documentation ROS 2 documentation </title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://docs.ros.org/en/How-To-Guides/Ament-CMake-Documentation.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/translations.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="documentation utilisateur ament_cmake_python" href="Ament-CMake-Python-Documentation.html" />
    <link rel="prev" title="Développement d’un package ROS 2" href="Developing-a-ROS-2-Package.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> ROS 2 documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Installation/Ubuntu-Install-Debians.html">Ubuntu (Debian)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/Windows-Install-Binary.html">Windows (binaire)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/RHEL-Install-RPMs.html">RHEL (RPM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/Alternatives.html">Alternatives</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Installation/Alternatives/Ubuntu-Development-Setup.html">gratuit (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/Alternatives/Ubuntu-Install-Binary.html">gratuit (binaire)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/Alternatives/Windows-Development-Setup.html">Windows (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/Alternatives/RHEL-Development-Setup.html">RHEL (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/Alternatives/RHEL-Install-Binary.html">RHEL (binaire)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/Alternatives/macOS-Development-Setup.html">mac OS (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/Alternatives/Fedora-Development-Setup.html">Fedora (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/Alternatives/Latest-Development-Setup.html">Dernier développement (source)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/Maintaining-a-Source-Checkout.html">Maintenir la vérification de la source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/Testing.html">Tester avec des binaires de pré-version</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/DDS-Implementations.html">Implémentations DDS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Installation/DDS-Implementations/Install-Connext-Security-Plugins.html">Plugins de sécurité Connect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/DDS-Implementations/Install-Connext-University-Eval.html">RTI Connect DDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/DDS-Implementations/Working-with-Eclipse-CycloneDDS.html">Éclipse Cyclone DDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/DDS-Implementations/Working-with-GurumNetworks-GurumDDS.html">GurumNetworks GurumDDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/DDS-Implementations/Working-with-eProsima-Fast-DDS.html">DDS rapide eProsima</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Releases.html">Distributions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Releases/Release-Humble-Hawksbill.html">Humble Hawksbill (<code class="docutils literal notranslate"><span class="pre">humble</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Releases/Humble-Hawksbill-Complete-Changelog.html">Journal des modifications de Humble Hawksbill</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Releases/Release-Foxy-Fitzroy.html">Foxy Fitzroy (<code class="docutils literal notranslate"><span class="pre">foxy</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Releases/Release-Rolling-Ridley.html">Rouler Ridley (<code class="docutils literal notranslate"><span class="pre">rouler</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Releases/Development.html">Développement Répartition</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Releases/Release-Iron-Irwini.html">ROS 2 Iron Irwini (nom de code “iron”; mai 2023)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Releases/End-of-Life.html">Distributions en fin de vie</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Releases/Release-Galactic-Geochelone.html">Géochelone Galactique (<code class="docutils literal notranslate"><span class="pre">galactique</span></code>)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Releases/Galactic-Geochelone-Complete-Changelog.html">Journal des modifications de Galactic Geochelone</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Releases/Release-Eloquent-Elusor.html">Eloquent Elusor (``éloquent””)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Releases/Release-Dashing-Diademata.html">Dashing Diademata (<code class="docutils literal notranslate"><span class="pre">fringant</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Releases/Release-Crystal-Clemmys.html">Cristal Clemmys (<code class="docutils literal notranslate"><span class="pre">cristal</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Releases/Release-Bouncy-Bolson.html">Bouncy Bolson (<code class="docutils literal notranslate"><span class="pre">rebondissant</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Releases/Release-Ardent-Apalone.html">Apalone ardent (<code class="docutils literal notranslate"><span class="pre">ardent</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Releases/Beta3-Overview.html">Bêta 3 (<code class="docutils literal notranslate"><span class="pre">r2b3</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Releases/Beta2-Overview.html">Bêta 2 (<code class="docutils literal notranslate"><span class="pre">r2b2</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Releases/Beta1-Overview.html">Bêta 1 (<code class="docutils literal notranslate"><span class="pre">Asphalte</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Releases/Alpha-Overview.html">Alphas</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Releases/Release-Process.html">Processus de développement d’une version</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Tutorials.html">Tutoriels</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Tutorials/Beginner-CLI-Tools.html">Débutant : outils CLI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-CLI-Tools/Configuring-ROS2-Environment.html">Configuration de l’environnement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-CLI-Tools/Introducing-Turtlesim/Introducing-Turtlesim.html">Utiliser <code class="docutils literal notranslate"><span class="pre">turtlesim</span></code> et <code class="docutils literal notranslate"><span class="pre">rqt</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Nodes/Understanding-ROS2-Nodes.html">Comprendre les nœuds</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Topics/Understanding-ROS2-Topics.html">Comprendre les sujets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Services/Understanding-ROS2-Services.html">Comprendre les services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Parameters/Understanding-ROS2-Parameters.html">Comprendre les paramètres</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Actions/Understanding-ROS2-Actions.html">Comprendre les actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-CLI-Tools/Using-Rqt-Console/Using-Rqt-Console.html">Utilisation de <code class="docutils literal notranslate"><span class="pre">rqt_console</span></code> pour afficher les journaux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-CLI-Tools/Launching-Multiple-Nodes/Launching-Multiple-Nodes.html">Nœuds de lancement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-CLI-Tools/Recording-And-Playing-Back-Data/Recording-And-Playing-Back-Data.html">Enregistrement et lecture de données</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries.html">Débutant : Bibliothèques clientes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Colcon-Tutorial.html">Utiliser <code class="docutils literal notranslate"><span class="pre">colcon</span></code> pour créer des packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Creating-A-Workspace/Creating-A-Workspace.html">Créer un espace de travail</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Creating-Your-First-ROS2-Package.html">Création d’un paquet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Cpp-Publisher-And-Subscriber.html">Écrire un simple éditeur et abonné (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Py-Publisher-And-Subscriber.html">Écrire un simple éditeur et abonné (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Cpp-Service-And-Client.html">Ecrire un service et un client simples (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Py-Service-And-Client.html">Écrire un service et un client simples (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Custom-ROS2-Interfaces.html">Création de fichiers msg et srv personnalisés</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Single-Package-Define-And-Use-Interface.html">Implémentation d’interfaces personnalisées</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Using-Parameters-In-A-Class-CPP.html">Utiliser des paramètres dans une classe (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Using-Parameters-In-A-Class-Python.html">Utiliser des paramètres dans une classe (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Getting-Started-With-Ros2doctor.html">Utiliser <code class="docutils literal notranslate"><span class="pre">ros2doctor</span></code> pour identifier les problèmes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Pluginlib.html">Créer et utiliser des plugins (C++)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Tutorials/Intermediate.html">Intermédiaire</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Intermediate/Rosdep.html">Gestion des dépendances avec rosdep</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Intermediate/Creating-an-Action.html">Créer une action</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Intermediate/Writing-an-Action-Server-Client/Cpp.html">Ecriture d’un serveur d’action et d’un client (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Intermediate/Writing-an-Action-Server-Client/Py.html">Ecriture d’un serveur d’action et d’un client (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Intermediate/Composition.html">Composer plusieurs nœuds en un seul processus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Intermediate/Monitoring-For-Parameter-Changes-CPP.html">Surveillance des changements de paramètres (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Intermediate/Launch/Launch-Main.html">Lancement</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Launch/Creating-Launch-Files.html">Création d’un fichier de lancement</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Launch/Launch-system.html">Intégration des fichiers de lancement dans les packages ROS 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Launch/Using-Substitutions.html">Utiliser des substitutions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Launch/Using-Event-Handlers.html">Utilisation des gestionnaires d’événements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Launch/Using-ROS2-Launch-For-Large-Projects.html">Gestion de grands projets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Tf2-Main.html">tracé</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Introduction-To-Tf2.html">Présentation de <code class="docutils literal notranslate"><span class="pre">tf2</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Static-Broadcaster-Py.html">Écrire un diffuseur statique (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Static-Broadcaster-Cpp.html">Écrire un diffuseur statique (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Broadcaster-Py.html">Écrire un diffuseur (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Broadcaster-Cpp.html">Ecrire un diffuseur (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Listener-Py.html">Écrire un écouteur (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Listener-Cpp.html">Écrire un écouteur (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Adding-A-Frame-Py.html">Ajouter un cadre (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Adding-A-Frame-Cpp.html">Ajouter un cadre (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Learning-About-Tf2-And-Time-Py.html">Utiliser le temps (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Learning-About-Tf2-And-Time-Cpp.html">Utilisation du temps (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Time-Travel-With-Tf2-Py.html">Voyager dans le temps (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Time-Travel-With-Tf2-Cpp.html">Voyager dans le temps (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Debugging-Tf2-Problems.html">Débogage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Quaternion-Fundamentals.html">Fondamentaux du quaternion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Using-Stamped-Datatypes-With-Tf2-Ros-MessageFilter.html">Utiliser des types de données tamponnés avec <code class="docutils literal notranslate"><span class="pre">tf2_ros::MessageFilter</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Intermediate/Testing/Testing-Main.html">Essai</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Testing/CLI.html">Exécution de tests dans ROS 2 à partir de la ligne de commande</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Testing/Python.html">Écrire des tests de base avec Python</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Intermediate/URDF/URDF-Main.html">URDF</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/URDF/Building-a-Visual-Robot-Model-with-URDF-from-Scratch.html">Construire un modèle de robot visuel à partir de zéro</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/URDF/Building-a-Movable-Robot-Model-with-URDF.html">Construire un modèle de robot mobile</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/URDF/Adding-Physical-and-Collision-Properties-to-a-URDF-Model.html">Ajout de propriétés physiques et de collision</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/URDF/Using-Xacro-to-Clean-Up-a-URDF-File.html">Utiliser Xacro pour nettoyer votre code</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/URDF/Using-URDF-with-Robot-State-Publisher.html">Utiliser URDF avec <code class="docutils literal notranslate"><span class="pre">robot_state_publisher</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Tutorials/Advanced.html">Avancé</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Advanced/Topic-Statistics-Tutorial/Topic-Statistics-Tutorial.html">Activation des statistiques de sujet (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Advanced/Discovery-Server/Discovery-Server.html">Utilisation de Fast DDS Discovery Server comme protocole de découverte [contribution de la communauté]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Advanced/Allocator-Template-Tutorial.html">Implémentation d’un répartiteur de mémoire personnalisé</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Advanced/FastDDS-Configuration.html">Libérer le potentiel du middleware Fast DDS [contribution de la communauté]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Advanced/Recording-A-Bag-From-Your-Own-Node-CPP.html">Enregistrer un sac à partir d’un nœud (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Advanced/Recording-A-Bag-From-Your-Own-Node-Py.html">Enregistrer un sac à partir d’un nœud (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Advanced/Simulators/Simulation-Main.html">Simulation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Advanced/Simulators/Webots.html">Mise en place d’une simulation de robot (Webots)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Advanced/Simulators/Gazebo.html">Mise en place d’une simulation de robot (Gazebo)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Advanced/Security/Security-Main.html">Sécurité</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Advanced/Security/Introducing-ros2-security.html">Mise en place de la sécurité</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Advanced/Security/The-Keystore.html">Comprendre le magasin de clés de sécurité</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Advanced/Security/Security-on-Two.html">Garantir la sécurité sur toutes les machines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Advanced/Security/Examine-Traffic.html">Examen du trafic réseau</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Advanced/Security/Access-Controls.html">Paramétrage des contrôles d’accès</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Tutorials/Demos.html">Démos</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Demos/Quality-of-Service.html">Utilisation des paramètres de qualité de service pour les réseaux avec perte</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Demos/Managed-Nodes.html">Gestion des nœuds avec des cycles de vie gérés</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Demos/Intra-Process-Communication.html">Mettre en place une communication intra-process efficace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Demos/Rosbag-with-ROS1-Bridge.html">Enregistrement et lecture de données avec <code class="docutils literal notranslate"><span class="pre">rosbag</span></code> en utilisant le pont ROS 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Demos/Real-Time-Programming.html">Comprendre la programmation temps réel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Demos/dummy-robot-demo.html">Expérimenter avec un robot factice</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Demos/Logging-and-logger-configuration.html">Enregistrement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Demos/Content-Filtering-Subscription.html">Création d’un abonnement au filtrage de contenu</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Tutorials/Miscellaneous.html">Divers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Miscellaneous/Deploying-ROS-2-on-IBM-Cloud.html">Déploiement sur IBM Cloud Kubernetes [contribution de la communauté]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Miscellaneous/Eclipse-Oxygen-with-ROS-2-and-rviz2.html">Utiliser Eclipse Oxygen avec <code class="docutils literal notranslate"><span class="pre">rviz2</span></code> [community-contributed]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Miscellaneous/Building-Realtime-rt_preempt-kernel-for-ROS-2.html">Construire un noyau Linux en temps réel [contribution de la communauté]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Miscellaneous/Building-ROS2-Package-with-eclipse-2021-06.html">Construire un package avec Eclipse 2021-06</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../How-To-Guides.html">Guides pratiques</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Installation-Troubleshooting.html">Dépannage de l’installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Developing-a-ROS-2-Package.html">Développement d’un package ROS 2</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">documentation utilisateur ament_cmake</a></li>
<li class="toctree-l2"><a class="reference internal" href="Ament-CMake-Python-Documentation.html">documentation utilisateur ament_cmake_python</a></li>
<li class="toctree-l2"><a class="reference internal" href="Launch-files-migration-guide.html">Migration des fichiers de lancement de ROS 1 vers ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="Launch-file-different-formats.html">Utilisation de Python, XML et YAML pour les fichiers de lancement ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="Launching-composable-nodes.html">Utilisation du lancement de ROS 2 pour lancer des nœuds composables</a></li>
<li class="toctree-l2"><a class="reference internal" href="Parameters-YAML-files-migration-guide.html">Migration des fichiers de paramètres YAML de ROS 1 vers ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="Node-arguments.html">Passer des arguments ROS aux nœuds via la ligne de commande</a></li>
<li class="toctree-l2"><a class="reference internal" href="Sync-Vs-Async.html">Clients de service synchrones ou asynchrones</a></li>
<li class="toctree-l2"><a class="reference internal" href="DDS-tuning.html">Informations de réglage DDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="Overriding-QoS-Policies-For-Recording-And-Playback.html">rosbag2 : Remplacement des politiques de QoS</a></li>
<li class="toctree-l2"><a class="reference internal" href="Working-with-multiple-RMW-implementations.html">Travailler avec plusieurs implémentations de middleware ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="Cross-compilation.html">Compilation croisée</a></li>
<li class="toctree-l2"><a class="reference internal" href="Releasing/Releasing-a-Package.html">Libérer un paquet</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Releasing/First-Time-Release.html">Première sortie</a></li>
<li class="toctree-l3"><a class="reference internal" href="Releasing/Subsequent-Releases.html">Versions ultérieures</a></li>
<li class="toctree-l3"><a class="reference internal" href="Releasing/Release-Team-Repository.html">Équipe de publication / Référentiel</a></li>
<li class="toctree-l3"><a class="reference internal" href="Releasing/Release-Track.html">Piste de sortie</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Using-Python-Packages.html">Utilisation de packages Python avec ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="RQt-Port-Plugin-Windows.html">Portage des plugins RQt vers Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="Run-2-nodes-in-single-or-separate-docker-containers.html">Exécution de nœuds ROS 2 dans Docker [contribution de la communauté]</a></li>
<li class="toctree-l2"><a class="reference internal" href="Visualizing-ROS-2-Data-With-Foxglove-Studio.html">Visualiser les données ROS 2 avec Foxglove Studio</a></li>
<li class="toctree-l2"><a class="reference internal" href="Package-maintainer-guide.html">Guide du responsable du paquet ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="Building-a-Custom-Debian-Package.html">Construire un paquet Debian personnalisé</a></li>
<li class="toctree-l2"><a class="reference internal" href="Building-ROS-2-with-Tracing-Instrumentation.html">Construire ROS 2 avec instrumentation de traçage</a></li>
<li class="toctree-l2"><a class="reference internal" href="Topics-Services-Actions.html">Sujets vs Services vs Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Using-Variants.html">Utiliser des variantes</a></li>
<li class="toctree-l2"><a class="reference internal" href="Using-ros2-param.html">Utilisation de l’outil de ligne de commande <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">param</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="Using-ros1_bridge-Jammy-upstream.html">Utilisation de <code class="docutils literal notranslate"><span class="pre">ros1_bridge</span></code> avec ROS en amont sur Ubuntu 22.04</a></li>
<li class="toctree-l2"><a class="reference internal" href="Disabling-ZeroCopy-loaned-messages.html">Désactivation des messages prêtés sans copie</a></li>
<li class="toctree-l2"><a class="reference internal" href="Installing-on-Raspberry-Pi.html">ROS 2 sur Raspberry Pi</a></li>
<li class="toctree-l2"><a class="reference internal" href="Using-callback-groups.html">Utilisation des groupes de rappel</a></li>
<li class="toctree-l2"><a class="reference internal" href="RQt-Source-Install.html">Construire RQt à partir de la source</a><ul>
<li class="toctree-l3"><a class="reference internal" href="RQt-Source-Install-MacOS.html">Construire RQt à partir de la source sur macOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="RQt-Source-Install-Windows10.html">Construire RQt à partir de la source sur Windows 10</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Concepts.html">Notions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Domain-ID.html">Le ROS_DOMAIN_ID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Different-Middleware-Vendors.html">À propos des différents fournisseurs ROS 2 DDS/RTPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Logging.html">À propos de la journalisation et de la configuration de l’enregistreur</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Quality-of-Service-Settings.html">À propos des paramètres de qualité de service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-ROS-2-Client-Libraries.html">À propos des bibliothèques clientes ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-ROS-Interfaces.html">À propos des interfaces ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-ROS-2-Parameters.html">À propos des paramètres dans ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Executors.html">Exécuteurs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Topic-Statistics.html">À propos des statistiques de sujet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Command-Line-Tools.html">Introspection avec des outils en ligne de commande</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-RQt.html">Présentation et utilisation de RQt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Composition.html">À propos de la composition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Catment.html">Sur le mélange d’ament et de chaton (catment)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Cross-Compilation.html">À propos de la compilation croisée</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Security.html">À propos de la sécurité ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Tf2.html">À propos de TF2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Build-System.html">À propos du système de construction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Internal-Interfaces.html">À propos des interfaces ROS 2 internes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Middleware-Implementations.html">À propos des implémentations de middleware ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-ROS-2-Client-Libraries.html">À propos des bibliothèques clientes ROS 2</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Contact.html">Contacter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../The-ROS2-Project.html">Le projet ROS 2</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../The-ROS2-Project/Contributing.html">Contribuant</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../The-ROS2-Project/Contributing/Developer-Guide.html">Guide du développeur ROS 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The-ROS2-Project/Contributing/Code-Style-Language-Versions.html">Style de code et versions linguistiques</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The-ROS2-Project/Contributing/Quality-Guide.html">Guide qualité : assurer la qualité du code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The-ROS2-Project/Contributing/Migration-Guide.html">Guide de migration depuis ROS 1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../The-ROS2-Project/Contributing/Migration-Guide-Python.html">Guide de migration Python depuis ROS 1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../The-ROS2-Project/Contributing/Build-Farms.html">Fermes de construction ROS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The-ROS2-Project/Contributing/Windows-Tips-and-Tricks.html">Trucs et astuces Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The-ROS2-Project/Contributing/Contributing-To-ROS-2-Documentation.html">Contribuer à la documentation ROS 2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../The-ROS2-Project/Features.html">Statut des fonctionnalités</a></li>
<li class="toctree-l2"><a class="reference internal" href="../The-ROS2-Project/Feature-Ideas.html">Idées de fonctionnalités</a></li>
<li class="toctree-l2"><a class="reference internal" href="../The-ROS2-Project/Roadmap.html">Feuille de route</a></li>
<li class="toctree-l2"><a class="reference internal" href="../The-ROS2-Project/ROSCon-Content.html">Pourparlers ROSCon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../The-ROS2-Project/Governance.html">Gouvernance du projet</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../The-ROS2-Project/Governance/ROS2-TSC-Charter.html">Charte du comité de pilotage technique ROS 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The-ROS2-Project/Governance/ROS2-TSC-Intake-process.html">Processus d’admission des candidats ROS 2 TSC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The-ROS2-Project/Governance/How-To-Start-A-Community-Working-Group.html">Comment démarrer un groupe de travail communautaire</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../The-ROS2-Project/Marketing.html">Commercialisation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Related-Projects.html">Projets liés</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Related-Projects/Intel-ROS2-Projects.html">Projets Intel ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Related-Projects/Nvidia-ROS2-Projects.html">Projets NVIDIA ROS 2</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Glossary.html">Glossaire</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Citations.html">Citations</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ROS 2 documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../How-To-Guides.html">Guides pratiques</a></li>
      <li class="breadcrumb-item active">documentation utilisateur ament_cmake</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ros2/ros2_documentation/blob/rolling/source/How-To-Guides/Ament-CMake-Documentation.rst" class="fa fa-github"> Éditer sur GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             


  <div class="section" id="ament-cmake-user-documentation">
<h1>documentation utilisateur ament_cmake<a class="headerlink" href="#ament-cmake-user-documentation" title="Lien permanent vers ce titre"></a></h1>
<p>ament_cmake est le système de construction pour les packages basés sur CMake dans ROS 2 (en particulier, il sera utilisé pour la plupart sinon tous les projets C/C++). Il s’agit d’un ensemble de scripts améliorant CMake et ajoutant des fonctionnalités pratiques pour les auteurs de packages. Connaître les bases de <a class="reference external" href="https://cmake.org/cmake/help/v3.5/">CMake</a> sera très utile, un tutoriel officiel peut être trouvé <a class="reference external" href="https://cmake.org/cmake/aide/dernier/guide/tutoriel/index.html">ici</a>.</p>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">Table des matières</p>
<ul class="simple">
<li><p><a class="reference internal" href="#basics" id="id1">Bases</a></p>
<ul>
<li><p><a class="reference internal" href="#basic-project-outline" id="id2">Aperçu du projet de base</a></p></li>
<li><p><a class="reference internal" href="#adding-files-and-headers" id="id3">Ajout de fichiers et d’en-têtes</a></p></li>
<li><p><a class="reference internal" href="#adding-dependencies" id="id4">Ajout de dépendances</a></p></li>
<li><p><a class="reference internal" href="#building-a-library" id="id5">Construire une bibliothèque</a></p></li>
<li><p><a class="reference internal" href="#compiler-and-linker-options" id="id6">Options du compilateur et de l’éditeur de liens</a></p></li>
<li><p><a class="reference internal" href="#building-libraries-on-windows" id="id7">Créer des bibliothèques sous Windows</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#testing-and-linting" id="id8">Test et peluchage</a></p>
<ul>
<li><p><a class="reference internal" href="#linting" id="id9">peluchage</a></p></li>
<li><p><a class="reference internal" href="#testing" id="id10">Essai</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#extending-ament" id="id11">Ament d’extension</a></p>
<ul>
<li><p><a class="reference internal" href="#adding-a-function-macro-to-ament" id="id12">Ajouter une fonction/macro à ament</a></p></li>
<li><p><a class="reference internal" href="#adding-to-extension-points" id="id13">Ajout aux points d’extension</a></p></li>
<li><p><a class="reference internal" href="#adding-extension-points" id="id14">Ajout de points d’extension</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#adding-resources" id="id15">Ajout de ressources</a></p>
<ul>
<li><p><a class="reference internal" href="#the-ament-index-explained" id="id16">L’indice d’ament expliqué</a></p></li>
<li><p><a class="reference internal" href="#querying-the-ament-index" id="id17">Interrogation de l’index d’ament</a></p></li>
<li><p><a class="reference internal" href="#adding-to-the-ament-index" id="id18">Ajout à l’index des aments</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="basics">
<h2><a class="toc-backref" href="#id1">Bases</a><a class="headerlink" href="#basics" title="Lien permanent vers ce titre"></a></h2>
<p>Un aperçu de base de CMake peut être produit en utilisant <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">pkg</span> <span class="pre">create</span> <span class="pre">&lt;package_name&gt;</span></code> sur la ligne de commande. Les informations de construction de base sont ensuite rassemblées dans deux fichiers : le <code class="docutils literal notranslate"><span class="pre">package.xml</span></code> et le <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code>. Le <code class="docutils literal notranslate"><span class="pre">package.xml</span></code> doit contenir toutes les dépendances et un peu de métadonnées pour permettre à colcon de trouver le bon ordre de construction pour vos packages, d’installer les dépendances requises dans CI ainsi que de fournir les informations pour une version avec <code class="docutils literal notranslate"><span class="pre">bloom</span> <span class="pre">``.</span> <span class="pre">Le</span> <span class="pre">``CMakeLists.txt</span></code> contient les commandes pour construire et empaqueter les exécutables et les bibliothèques et sera l’objet principal de ce document.</p>
<div class="section" id="basic-project-outline">
<h3><a class="toc-backref" href="#id2">Aperçu du projet de base</a><a class="headerlink" href="#basic-project-outline" title="Lien permanent vers ce titre"></a></h3>
<p>Le schéma de base du <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> d’un package ament contient :</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.5</span><span class="p">)</span>
<span class="nb">project</span><span class="p">(</span><span class="s">my_project</span><span class="p">)</span>

<span class="nb">ament_package</span><span class="p">()</span>
</pre></div>
</div>
<p>L’argument de <code class="docutils literal notranslate"><span class="pre">project</span></code> sera le nom du package et doit être identique au nom du package dans <code class="docutils literal notranslate"><span class="pre">package.xml</span></code>.</p>
<p>La configuration du projet est effectuée par <code class="docutils literal notranslate"><span class="pre">ament_package()</span></code> et cet appel doit se produire exactement une fois par package. <code class="docutils literal notranslate"><span class="pre">ament_package()</span></code> installe le <code class="docutils literal notranslate"><span class="pre">package.xml</span></code>, enregistre le paquet avec l’index ament et installe les fichiers de configuration (et éventuellement cible) pour CMake afin qu’il puisse être trouvé par d’autres paquets en utilisant <code class="docutils literal notranslate"><span class="pre">find_package`</span> <span class="pre">`.</span> <span class="pre">Étant</span> <span class="pre">donné</span> <span class="pre">que</span> <span class="pre">``ament_package()</span></code> rassemble beaucoup d’informations à partir de <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code>, il devrait être le dernier appel dans votre <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code>. Bien qu’il soit possible de suivre les appels à <code class="docutils literal notranslate"><span class="pre">ament_package()</span></code> par des appels aux fonctions <code class="docutils literal notranslate"><span class="pre">install</span></code> copiant fichiers et répertoires, il est plus simple de garder <code class="docutils literal notranslate"><span class="pre">ament_package()</span></code> le dernier appel.</p>
<p><code class="docutils literal notranslate"><span class="pre">ament_package</span></code> peut recevoir des arguments supplémentaires :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_EXTRAS</span></code> : une liste de fichiers CMake (modèles <code class="docutils literal notranslate"><span class="pre">.cmake</span></code> ou <code class="docutils literal notranslate"><span class="pre">.cmake.in</span></code> développés par <code class="docutils literal notranslate"><span class="pre">configure_file()</span></code>) qui devraient être disponibles pour les clients du paquet. Pour un exemple d’utilisation de ces arguments, consultez la discussion dans <a class="reference internal" href="#adding-resources">Ajout de ressources</a>. Pour plus d’informations sur l’utilisation des fichiers modèles, consultez <a class="reference external" href="https://cmake.org/cmake/help/v3.5/command/configure_file.html">la documentation officielle</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_EXTRAS_POST</span></code> : identique à <code class="docutils literal notranslate"><span class="pre">CONFIG_EXTRAS</span></code>, mais l’ordre dans lequel les fichiers sont ajoutés diffère. Alors que les fichiers <code class="docutils literal notranslate"><span class="pre">CONFIG_EXTRAS</span></code> sont inclus avant les fichiers générés pour les appels <code class="docutils literal notranslate"><span class="pre">ament_export_*</span></code>, les fichiers de <code class="docutils literal notranslate"><span class="pre">CONFIG_EXTRAS_POST</span></code> sont inclus après.</p></li>
</ul>
<p>Au lieu d’ajouter à <code class="docutils literal notranslate"><span class="pre">ament_package</span></code>, vous pouvez également ajouter à la variable <code class="docutils literal notranslate"><span class="pre">${PROJECT_NAME}_CONFIG_EXTRAS</span></code> et <code class="docutils literal notranslate"><span class="pre">${PROJECT_NAME}_CONFIG_EXTRAS_POST</span></code> avec le même effet. La seule différence est encore une fois l’ordre dans lequel les fichiers sont ajoutés avec l’ordre total suivant :</p>
<ul class="simple">
<li><p>fichiers ajoutés par <code class="docutils literal notranslate"><span class="pre">CONFIG_EXTRAS</span></code></p></li>
<li><p>fichiers ajoutés en ajoutant à <code class="docutils literal notranslate"><span class="pre">${PROJECT_NAME}_CONFIG_EXTRAS</span></code></p></li>
<li><p>fichiers ajoutés en ajoutant à <code class="docutils literal notranslate"><span class="pre">${PROJECT_NAME}_CONFIG_EXTRAS_POST</span></code></p></li>
<li><p>fichiers ajoutés par <code class="docutils literal notranslate"><span class="pre">CONFIG_EXTRAS_POST</span></code></p></li>
</ul>
</div>
<div class="section" id="adding-files-and-headers">
<h3><a class="toc-backref" href="#id3">Ajout de fichiers et d’en-têtes</a><a class="headerlink" href="#adding-files-and-headers" title="Lien permanent vers ce titre"></a></h3>
<p>Il y a deux cibles principales à construire : les bibliothèques et les exécutables qui sont respectivement construits par <code class="docutils literal notranslate"><span class="pre">add_library</span></code> et <code class="docutils literal notranslate"><span class="pre">add_executable</span></code>.</p>
<p>Avec la séparation des fichiers d’en-tête et de l’implémentation en C/C++, il n’est pas toujours nécessaire d’ajouter les deux fichiers comme argument à <code class="docutils literal notranslate"><span class="pre">add_library</span></code>/<code class="docutils literal notranslate"><span class="pre">add_executable</span></code>.</p>
<p>La meilleure pratique suivante est proposée :</p>
<ul class="simple">
<li><p>si vous construisez une bibliothèque, placez tous les en-têtes qui doivent être utilisables par les clients et doivent donc être installés dans un sous-répertoire du dossier <code class="docutils literal notranslate"><span class="pre">include</span></code> nommé comme le paquet, tandis que tous les autres fichiers (<code class="docutils literal notranslate"><span class="pre">.c/.cpp`</span> <span class="pre">`</span> <span class="pre">et</span> <span class="pre">les</span> <span class="pre">fichiers</span> <span class="pre">d'en-tête</span> <span class="pre">qui</span> <span class="pre">ne</span> <span class="pre">doivent</span> <span class="pre">pas</span> <span class="pre">être</span> <span class="pre">exportés)</span> <span class="pre">se</span> <span class="pre">trouvent</span> <span class="pre">dans</span> <span class="pre">le</span> <span class="pre">dossier</span> <span class="pre">``src</span></code>.</p></li>
<li><p>seuls les fichiers cpp sont explicitement référencés dans l’appel à <code class="docutils literal notranslate"><span class="pre">add_library</span></code> ou <code class="docutils literal notranslate"><span class="pre">add_executable</span></code></p></li>
<li><p>permettre de trouver des en-têtes via</p></li>
</ul>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">target_include_directories</span><span class="p">(</span><span class="s">my_target</span>
<span class="w">  </span><span class="s">PUBLIC</span>
<span class="w">    </span><span class="o">$&lt;</span><span class="nv">BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include</span><span class="o">&gt;</span>
<span class="w">    </span><span class="o">$&lt;</span><span class="nv">INSTALL_INTERFACE:include</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Cela ajoute tous les fichiers du dossier <code class="docutils literal notranslate"><span class="pre">${CMAKE_CURRENT_SOURCE_DIR}/include</span></code> à l’interface publique pendant la construction et tous les fichiers du dossier d’inclusion (par rapport à <code class="docutils literal notranslate"><span class="pre">${CMAKE_INSTALL_DIR}</span></code>) lors de l’installation.</p>
<p>En principe, l’utilisation d’expressions de générateur ici n’est pas nécessaire si les deux dossiers sont appelés <code class="docutils literal notranslate"><span class="pre">include</span></code> et de niveau supérieur par rapport à <code class="docutils literal notranslate"><span class="pre">${CMAKE_CURRENT_SOURCE_DIR}</span></code> et <code class="docutils literal notranslate"><span class="pre">${CMAKE_INSTALL_DIR}</span></code>, mais c’est très courant .</p>
</div>
<div class="section" id="adding-dependencies">
<h3><a class="toc-backref" href="#id4">Ajout de dépendances</a><a class="headerlink" href="#adding-dependencies" title="Lien permanent vers ce titre"></a></h3>
<p>Il existe deux façons de lier vos packages à une nouvelle dépendance.</p>
<p>La première méthode recommandée consiste à utiliser la macro ament <code class="docutils literal notranslate"><span class="pre">ament_target_dependencies</span></code>. Par exemple, supposons que nous voulions lier <code class="docutils literal notranslate"><span class="pre">my_target</span></code> à la bibliothèque d’algèbre linéaire Eigen3.</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">find_package</span><span class="p">(</span><span class="s">Eigen3</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">ament_target_dependencies</span><span class="p">(</span><span class="s">my_target</span><span class="w"> </span><span class="s">Eigen3</span><span class="p">)</span>
</pre></div>
</div>
<p>Il comprend les en-têtes et bibliothèques nécessaires et leurs dépendances pour être correctement trouvés par le projet. Cela garantira également que les répertoires d’inclusion de toutes les dépendances sont correctement ordonnés lors de l’utilisation d’espaces de travail superposés.</p>
<p>La deuxième façon est d’utiliser <code class="docutils literal notranslate"><span class="pre">target_link_libraries</span></code>.</p>
<p>La méthode recommandée dans CMake moderne consiste à n’utiliser que des cibles, à les exporter et à les lier. Les cibles CMake ont un espace de noms, similaire à C++. Par exemple, <code class="docutils literal notranslate"><span class="pre">Eigen3</span></code> définit la cible <code class="docutils literal notranslate"><span class="pre">Eigen3::Eigen</span></code>.</p>
<p>Au moins jusqu’à ce que les noms de cible <code class="docutils literal notranslate"><span class="pre">Crystal</span> <span class="pre">Clemmys</span></code> ne soient pas pris en charge dans la macro <code class="docutils literal notranslate"><span class="pre">ament_target_dependencies</span></code>. Parfois, il sera nécessaire d’appeler la fonction CMake <code class="docutils literal notranslate"><span class="pre">target_link_libaries</span></code>. Dans l’exemple de Eigen3, l’appel devrait alors ressembler à</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">find_package</span><span class="p">(</span><span class="s">Eigen3</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">my_target</span><span class="w"> </span><span class="s">Eigen3::Eigen</span><span class="p">)</span>
</pre></div>
</div>
<p>Cela inclura également les en-têtes nécessaires, les bibliothèques et leurs dépendances, mais contrairement à <code class="docutils literal notranslate"><span class="pre">ament_target_dependencies</span></code>, il se peut que les dépendances ne soient pas correctement ordonnées lors de l’utilisation d’espaces de travail superposés.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Il ne devrait jamais être nécessaire de <code class="docutils literal notranslate"><span class="pre">find_package</span></code> une bibliothèque qui n’est pas explicitement nécessaire mais qui est une dépendance d’une autre dépendance qui est explicitement nécessaire. Si tel est le cas, signalez un bogue sur le paquet correspondant.</p>
</div>
</div>
<div class="section" id="building-a-library">
<h3><a class="toc-backref" href="#id5">Construire une bibliothèque</a><a class="headerlink" href="#building-a-library" title="Lien permanent vers ce titre"></a></h3>
<p>Lors de la création d’une bibliothèque réutilisable, certaines informations doivent être exportées pour que les packages en aval puissent les utiliser facilement.</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">ament_export_targets</span><span class="p">(</span><span class="s">my_libraryTargets</span><span class="w"> </span><span class="s">HAS_LIBRARY_TARGET</span><span class="p">)</span>
<span class="nb">ament_export_dependencies</span><span class="p">(</span><span class="s">some_dependency</span><span class="p">)</span>

<span class="nb">install</span><span class="p">(</span>
<span class="w">  </span><span class="s">DIRECTORY</span><span class="w"> </span><span class="s">include/</span>
<span class="w">  </span><span class="s">DESTINATION</span><span class="w"> </span><span class="s">include</span>
<span class="p">)</span>

<span class="nb">install</span><span class="p">(</span>
<span class="w">  </span><span class="s">TARGETS</span><span class="w"> </span><span class="s">my_library</span>
<span class="w">  </span><span class="s">EXPORT</span><span class="w"> </span><span class="s">my_libraryTargets</span>
<span class="w">  </span><span class="s">LIBRARY</span><span class="w"> </span><span class="s">DESTINATION</span><span class="w"> </span><span class="s">lib</span>
<span class="w">  </span><span class="s">ARCHIVE</span><span class="w"> </span><span class="s">DESTINATION</span><span class="w"> </span><span class="s">lib</span>
<span class="w">  </span><span class="s">RUNTIME</span><span class="w"> </span><span class="s">DESTINATION</span><span class="w"> </span><span class="s">bin</span>
<span class="w">  </span><span class="s">INCLUDES</span><span class="w"> </span><span class="s">DESTINATION</span><span class="w"> </span><span class="s">include</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Ici, nous supposons que le dossier <code class="docutils literal notranslate"><span class="pre">include</span></code> contient les en-têtes qui doivent être exportés. Notez qu’il n’est pas nécessaire de placer tous les en-têtes dans un dossier séparé, uniquement ceux qui doivent être inclus par les clients.</p>
<p>Voici ce qui se passe dans l’extrait ci-dessus :</p>
<ul class="simple">
<li><p>La macro <code class="docutils literal notranslate"><span class="pre">ament_export_targets</span></code> exporte les cibles pour CMake. Ceci est nécessaire pour permettre aux clients de votre bibliothèque d’utiliser la syntaxe <code class="docutils literal notranslate"><span class="pre">target_link_libraries(client</span> <span class="pre">my_library::my_library)</span></code>. <code class="docutils literal notranslate"><span class="pre">ament_export_targets</span></code> peut prendre une liste arbitraire de cibles nommées <code class="docutils literal notranslate"><span class="pre">EXPORT</span></code> dans un appel d’installation et une option supplémentaire <code class="docutils literal notranslate"><span class="pre">HAS_LIBRARY_TARGET</span></code>, qui ajoute des bibliothèques potentielles aux variables d’environnement.</p></li>
<li><p>Le <code class="docutils literal notranslate"><span class="pre">ament_export_dependencies</span></code> exporte les dépendances vers les packages en aval. Ceci est nécessaire pour que l’utilisateur de la bibliothèque n’ait pas à appeler <code class="docutils literal notranslate"><span class="pre">find_package</span></code> pour ces dépendances également.</p></li>
<li><p>La première commande <code class="docutils literal notranslate"><span class="pre">install</span></code> installe les fichiers d’en-tête qui devraient être disponibles pour les clients.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Avertissement</p>
<p>L’appel de <code class="docutils literal notranslate"><span class="pre">ament_export_targets</span></code>, <code class="docutils literal notranslate"><span class="pre">ament_export_dependencies</span></code> ou d’autres commandes ament à partir d’un sous-répertoire CMake ne fonctionnera pas comme prévu. C’est parce que le sous-répertoire CMake n’a aucun moyen de définir les variables nécessaires dans la portée parent où <code class="docutils literal notranslate"><span class="pre">ament_package</span></code> est appelé.</p>
</div>
<ul class="simple">
<li><p>La dernière grande commande d’installation installe la bibliothèque. Les fichiers d’archive et de bibliothèque seront exportés vers le dossier lib, les binaires d’exécution seront installés dans le dossier bin et le chemin vers les en-têtes installés est <code class="docutils literal notranslate"><span class="pre">include</span></code>.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Les DLL Windows sont traitées comme des artefacts d’exécution et installées dans le dossier <code class="docutils literal notranslate"><span class="pre">RUNTIME</span> <span class="pre">DESTINATION</span></code>. Il est donc conseillé de ne pas omettre l’installation <code class="docutils literal notranslate"><span class="pre">RUNTIME</span></code> même lors du développement de bibliothèques sur des systèmes basés sur Unix.</p>
</div>
<ul class="simple">
<li><p>En ce qui concerne le <code class="docutils literal notranslate"><span class="pre">include</span> <span class="pre">directory</span></code>, la commande d’installation ajoute uniquement des informations à CMake, elle n’installe pas réellement le dossier includes. Ceci est fait en copiant les en-têtes via <code class="docutils literal notranslate"><span class="pre">install(DIRECTORY</span> <span class="pre">&lt;dir&gt;</span> <span class="pre">DESTINATION</span> <span class="pre">&lt;dest&gt;)</span></code> comme décrit ci-dessus.</p></li>
<li><p>La notation <code class="docutils literal notranslate"><span class="pre">EXPORT</span></code> de l’appel d’installation nécessite une attention supplémentaire : elle installe les fichiers CMake pour la cible <code class="docutils literal notranslate"><span class="pre">my_library</span></code>. Il est nommé exactement comme l’argument dans <code class="docutils literal notranslate"><span class="pre">ament_export_targets</span></code> et pourrait être nommé comme la bibliothèque. Cependant, cela empêchera alors d’utiliser la méthode <code class="docutils literal notranslate"><span class="pre">ament_target_dependencies</span></code> pour inclure votre bibliothèque. Pour permettre une flexibilité totale, il est conseillé de faire précéder la cible d’exportation avec quelque chose comme <code class="docutils literal notranslate"><span class="pre">&lt;target&gt;Targets</span></code>.</p></li>
<li><p>Tous les chemins d’installation sont relatifs à <code class="docutils literal notranslate"><span class="pre">CMAKE_INSTALL_PREFIX</span></code>, qui est déjà défini correctement par colcon/ament</p></li>
</ul>
<p>Deux fonctions supplémentaires peuvent être utilisées mais sont superflues pour les installations basées sur la cible :</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">ament_export_include_directories</span><span class="p">(</span><span class="s">include</span><span class="p">)</span>
<span class="nb">ament_export_libraries</span><span class="p">(</span><span class="s">my_library</span><span class="p">)</span>
</pre></div>
</div>
<p>La première macro marque le répertoire des répertoires d’inclusion exportés (ceci est réalisé par <code class="docutils literal notranslate"><span class="pre">INCLUDES</span> <span class="pre">DESTINATION</span></code> dans l’appel cible <code class="docutils literal notranslate"><span class="pre">install</span></code>). La deuxième macro marque l’emplacement de la bibliothèque installée (ceci est fait par l’argument <code class="docutils literal notranslate"><span class="pre">HAS_LIBRARY_TARGET</span></code> dans l’appel à <code class="docutils literal notranslate"><span class="pre">ament_export_targets</span></code>).</p>
<p>Certaines des macros peuvent prendre différents types d’arguments pour les exportations non ciblées, mais comme la méthode recommandée pour Make moderne consiste à utiliser des cibles, nous ne les aborderons pas ici. La documentation de ces options se trouve dans le code source lui-même.</p>
</div>
<div class="section" id="compiler-and-linker-options">
<h3><a class="toc-backref" href="#id6">Options du compilateur et de l’éditeur de liens</a><a class="headerlink" href="#compiler-and-linker-options" title="Lien permanent vers ce titre"></a></h3>
<p>ROS 2 cible les compilateurs qui respectent les standards C++14 et C99 jusqu’au moins <code class="docutils literal notranslate"><span class="pre">Crystal</span> <span class="pre">Clemmys</span></code>. Des versions plus récentes pourraient être ciblées à l’avenir et sont référencées <a class="reference external" href="https://www.ros.org/reps/rep-2000.html">ici</a>. Par conséquent, il est d’usage de définir les drapeaux CMake correspondants :</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">if</span><span class="p">(</span><span class="s">NOT</span><span class="w"> </span><span class="s">CMAKE_C_STANDARD</span><span class="p">)</span>
<span class="w">  </span><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_C_STANDARD</span><span class="w"> </span><span class="s">99</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>
<span class="nb">if</span><span class="p">(</span><span class="s">NOT</span><span class="w"> </span><span class="s">CMAKE_CXX_STANDARD</span><span class="p">)</span>
<span class="w">  </span><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_STANDARD</span><span class="w"> </span><span class="s">14</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>
</pre></div>
</div>
<p>Pour garder le code propre, les compilateurs doivent lancer des avertissements pour le code douteux et ces avertissements doivent être corrigés.</p>
<p>Il est recommandé de couvrir au moins les niveaux d’avertissement suivants :</p>
<ul class="simple">
<li><p>Pour Visual Studio, les avertissements <code class="docutils literal notranslate"><span class="pre">W1</span></code> par défaut sont conservés</p></li>
<li><p>Pour GCC et Clang : <code class="docutils literal notranslate"><span class="pre">-Wall</span> <span class="pre">-Wextra</span> <span class="pre">-Wpedantic</span></code> sont requis et <code class="docutils literal notranslate"><span class="pre">-Wshadow</span> <span class="pre">-Werror</span></code> sont conseillés (ce dernier fait des erreurs d’avertissement).</p></li>
</ul>
<p>Bien que CMake moderne conseille d’ajouter des indicateurs de compilateur sur une base cible, c’est-à-dire d’appeler</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">target_compile_options</span><span class="p">(</span><span class="s">my_target</span><span class="w"> </span><span class="s">PRIVATE</span><span class="w"> </span><span class="s">-Wall</span><span class="p">)</span>
</pre></div>
</div>
<p>il est actuellement recommandé d’utiliser la fonction au niveau du répertoire <code class="docutils literal notranslate"><span class="pre">add_compile_options(-Wall)</span></code> pour ne pas encombrer le code avec des options de compilation basées sur la cible pour tous les exécutables et les tests.</p>
</div>
<div class="section" id="building-libraries-on-windows">
<h3><a class="toc-backref" href="#id7">Créer des bibliothèques sous Windows</a><a class="headerlink" href="#building-libraries-on-windows" title="Lien permanent vers ce titre"></a></h3>
<p>Étant donné que Linux, Mac et Windows sont tous des plates-formes officiellement prises en charge, pour avoir un impact maximal, tout package doit également être construit sur Windows. Le format de bibliothèque Windows applique la visibilité des symboles : chaque symbole qui doit être utilisé à partir d’un client doit être explicitement exporté par la bibliothèque (et les symboles de données doivent être implicitement importés).</p>
<p>Pour que cela reste compatible avec les builds Clang et GCC, il est conseillé d’utiliser la logique du <a class="reference external" href="https://gcc.gnu.org/wiki/Visibility">wiki GCC</a>. Pour l’utiliser pour un paquet appelé <code class="docutils literal notranslate"><span class="pre">my_library</span></code> :</p>
<ul class="simple">
<li><p>Copiez la logique du lien dans un fichier d’en-tête appelé <code class="docutils literal notranslate"><span class="pre">visibility_control.hpp</span></code>.</p></li>
<li><p>Remplacez <code class="docutils literal notranslate"><span class="pre">DLL</span></code> par <code class="docutils literal notranslate"><span class="pre">MY_LIBRARY</span></code> (pour un exemple, voir le contrôle de visibilité de <a href="#id1"><span class="problematic" id="id2">`</span></a>rviz_rendering &lt;<a class="reference external" href="https://github.com/ros2/rviz/blob/ros2/rviz_rendering/include/rviz_rendering/visibility_control.hpp">https://github.com/ros2/rviz/blob/ros2/rviz_rendering/include/rviz_rendering/visibility_control.hpp</a>&gt; <a href="#id3"><span class="problematic" id="id4">`</span></a>__).</p></li>
<li><p>Utilisez les macros « MY_LIBRARY_PUBLIC » pour tous les symboles que vous devez exporter (c’est-à-dire les classes ou les fonctions).</p></li>
<li><p>Dans le projet <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> utilisez :</p></li>
</ul>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">target_compile_definitions</span><span class="p">(</span><span class="s">my_library</span><span class="w"> </span><span class="s">PRIVATE</span><span class="w"> </span><span class="s2">&quot;MY_LIBRARY_BUILDING_LIBRARY&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Pour plus de détails, voir <a class="reference internal" href="../The-ROS2-Project/Contributing/Windows-Tips-and-Tricks.html#windows-symbol-visibility"><span class="std std-ref">Visibilité des symboles Windows dans le document Trucs et astuces Windows</span></a>.</p>
</div>
</div>
<div class="section" id="testing-and-linting">
<h2><a class="toc-backref" href="#id8">Test et peluchage</a><a class="headerlink" href="#testing-and-linting" title="Lien permanent vers ce titre"></a></h2>
<p>Afin de séparer les tests de la construction de la bibliothèque avec colcon, encapsulez tous les appels aux linters et aux tests dans une condition :</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">if</span><span class="p">(</span><span class="s">BUILD_TESTING</span><span class="p">)</span>
<span class="w">  </span><span class="nb">find_package</span><span class="p">(</span><span class="s">ament_cmake_gtest</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="w">  </span><span class="nb">ament_add_gtest</span><span class="p">(</span><span class="s">&lt;tests&gt;</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="linting">
<h3><a class="toc-backref" href="#id9">peluchage</a><a class="headerlink" href="#linting" title="Lien permanent vers ce titre"></a></h3>
<p>Il est conseillé d’utiliser l’appel combiné de <a class="reference external" href="https://github.com/ament/ament_lint/blob/rolling/ament_lint_auto/doc/index.rst#ament_lint_auto">ament_lint_auto</a> :</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">find_package</span><span class="p">(</span><span class="s">ament_lint_auto</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">ament_lint_auto_find_test_dependencies</span><span class="p">()</span>
</pre></div>
</div>
<p>Cela exécutera les linters comme défini dans le <code class="docutils literal notranslate"><span class="pre">package.xml</span></code>. Il est recommandé d’utiliser l’ensemble de linters défini par le package <code class="docutils literal notranslate"><span class="pre">ament_lint_common</span></code>. Les linters individuels qui y sont inclus, ainsi que leurs fonctions, peuvent être vus dans les <a class="reference external" href="https://github.com/ament/ament_lint/blob/rolling/ament_lint_common/doc/index.rst">ament_lint_common docs</a>.</p>
<p>Les linters fournis par ament peuvent également être ajoutés séparément, au lieu d’exécuter <code class="docutils literal notranslate"><span class="pre">ament_lint_auto</span></code>. Un exemple de la façon de procéder peut être trouvé dans la documentation <a class="reference external" href="https://github.com/ament/ament_lint/blob/rolling/ament_cmake_lint_cmake/doc/index.rst">ament_cmake_lint_cmake</a>.</p>
</div>
<div class="section" id="testing">
<h3><a class="toc-backref" href="#id10">Essai</a><a class="headerlink" href="#testing" title="Lien permanent vers ce titre"></a></h3>
<p>Ament contient des macros CMake pour simplifier la configuration des GTests. Appel:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">find_package</span><span class="p">(</span><span class="s">ament_cmake_gtest</span><span class="p">)</span>
<span class="nb">ament_add_gtest</span><span class="p">(</span><span class="s">some_test</span><span class="w"> </span><span class="s">&lt;test_sources&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>pour ajouter un GTest. Il s’agit alors d’une cible régulière qui peut être liée à d’autres bibliothèques (comme la bibliothèque du projet). Les macros ont des paramètres supplémentaires :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">APPEND_ENV</span></code> : ajoute des variables d’environnement. Par exemple, vous pouvez ajouter au chemin du préfixe ament en appelant :</p></li>
</ul>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">find_package</span><span class="p">(</span><span class="s">ament_cmake_gtest</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">ament_add_gtest</span><span class="p">(</span><span class="s">some_test</span><span class="w"> </span><span class="s">&lt;test_sources&gt;</span>
<span class="w">  </span><span class="s">APPEND_ENV</span><span class="w"> </span><span class="s">PATH=some/addtional/path/for/testing/resources</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">APPEND_LIBRARY_DIRS</span></code> : ajoute des bibliothèques afin qu’elles puissent être trouvées par l’éditeur de liens lors de l’exécution. Cela peut être réalisé en définissant des variables d’environnement telles que <code class="docutils literal notranslate"><span class="pre">PATH</span></code> sous Windows et <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code> sous Linux, mais cela rend la plate-forme d’appel spécifique.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ENV</span></code> : définit les variables d’environnement (même syntaxe que <code class="docutils literal notranslate"><span class="pre">APPEND_ENV</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TIMEOUT</span></code> : définissez un délai de test en secondes. La valeur par défaut pour les GTests est de 60 secondes. Par example:</p></li>
</ul>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">ament_add_gtest</span><span class="p">(</span><span class="s">some_test</span><span class="w"> </span><span class="s">&lt;test_sources&gt;</span><span class="w"> </span><span class="s">TIMEOUT</span><span class="w"> </span><span class="s">120</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SKIP_TEST</span></code> : saute ce test (sera affiché comme « réussi » dans la sortie de la console).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SKIP_LINKING_MAIN_LIBRARIES</span></code> : ne pas lier avec GTest.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WORKING_DIRECTORY</span></code> : définit le répertoire de travail pour le test.</p></li>
</ul>
<p>Sinon, le répertoire de travail par défaut est le <code class="docutils literal notranslate"><span class="pre">CMAKE_CURRENT_BINARY_DIR</span></code>, qui est décrit dans la <a class="reference external" href="https://cmake.org/cmake/help/latest/variable/CMAKE_CURRENT_BINARY_DIR.html">documentation CMake</a>.</p>
<p>De même, il existe une macro CMake pour configurer GTest incluant GMock :</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">find_package</span><span class="p">(</span><span class="s">ament_cmake_gmock</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">ament_add_gmock</span><span class="p">(</span><span class="s">some_test</span><span class="w"> </span><span class="s">&lt;test_sources&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Il a les mêmes paramètres supplémentaires que <code class="docutils literal notranslate"><span class="pre">ament_add_gtest</span></code>.</p>
</div>
</div>
<div class="section" id="extending-ament">
<h2><a class="toc-backref" href="#id11">Ament d’extension</a><a class="headerlink" href="#extending-ament" title="Lien permanent vers ce titre"></a></h2>
<p>Il est possible d’enregistrer des macros/fonctions supplémentaires avec <code class="docutils literal notranslate"><span class="pre">ament_cmake</span></code> et de l’étendre de plusieurs manières.</p>
<div class="section" id="adding-a-function-macro-to-ament">
<h3><a class="toc-backref" href="#id12">Ajouter une fonction/macro à ament</a><a class="headerlink" href="#adding-a-function-macro-to-ament" title="Lien permanent vers ce titre"></a></h3>
<p>L’extension de ament signifie souvent que vous souhaitez que certaines fonctions soient disponibles pour d’autres packages. La meilleure façon de fournir la macro aux packages clients est de l’enregistrer avec ament.</p>
<p>Cela peut être fait en ajoutant la variable <code class="docutils literal notranslate"><span class="pre">${PROJECT_NAME}_CONFIG_EXTRAS</span></code>, qui est utilisée par <code class="docutils literal notranslate"><span class="pre">ament_package()</span></code> via</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="s">APPEND</span><span class="w"> </span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="s">_CONFIG_EXTRAS</span>
<span class="w">  </span><span class="s">path/to/file.cmake</span><span class="s2">&quot;</span>
<span class="s2">  other/pathto/file.cmake&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Alternativement, vous pouvez directement ajouter les fichiers à l’appel <code class="docutils literal notranslate"><span class="pre">ament_package()</span></code> :</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">ament_package</span><span class="p">(</span><span class="s">CONFIG_EXTRAS</span>
<span class="w">  </span><span class="s">path/to/file.cmake</span>
<span class="w">  </span><span class="s">other/pathto/file.cmake</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="adding-to-extension-points">
<h3><a class="toc-backref" href="#id13">Ajout aux points d’extension</a><a class="headerlink" href="#adding-to-extension-points" title="Lien permanent vers ce titre"></a></h3>
<p>En plus des fichiers simples avec des fonctions pouvant être utilisées dans d’autres packages, vous pouvez également ajouter des extensions à ament. Ces extensions sont des scripts qui sont exécutés avec la fonction qui définit le point d’extension. Le cas d’utilisation le plus courant pour les extensions ament est probablement l’enregistrement des générateurs de messages rosidl : lors de l’écriture d’un générateur, vous souhaitez normalement générer tous les messages et services avec votre générateur également sans modifier le code des packages de définition de message/service. Ceci est possible en enregistrant le générateur en tant qu’extension de <code class="docutils literal notranslate"><span class="pre">rosidl_generate_interfaces</span></code>.</p>
<p>A titre d’exemple, voir</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">ament_register_extension</span><span class="p">(</span>
<span class="w">  </span><span class="s2">&quot;rosidl_generate_interfaces&quot;</span>
<span class="w">  </span><span class="s2">&quot;rosidl_generator_cpp&quot;</span>
<span class="w">  </span><span class="s2">&quot;rosidl_generator_cpp_generate_interfaces.cmake&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>qui enregistre la macro <code class="docutils literal notranslate"><span class="pre">rosidl_generator_cpp_generate_interfaces.cmake</span></code> pour le package <code class="docutils literal notranslate"><span class="pre">rosidl_generator_cpp</span></code> au point d’extension <code class="docutils literal notranslate"><span class="pre">rosidl_generate_interfaces</span></code>. Lorsque le point d’extension est exécuté, cela déclenchera l’exécution du script <code class="docutils literal notranslate"><span class="pre">rosidl_generator_cpp_generate_interfaces.cmake</span></code> ici. En particulier, cela appellera le générateur chaque fois que la fonction <code class="docutils literal notranslate"><span class="pre">rosidl_generate_interfaces</span></code> sera exécutée.</p>
<p>Le point d’extension le plus important pour les générateurs, mis à part <code class="docutils literal notranslate"><span class="pre">rosidl_generate_interfaces</span></code>, est <code class="docutils literal notranslate"><span class="pre">ament_package</span></code>, qui exécutera simplement des scripts avec l’appel <code class="docutils literal notranslate"><span class="pre">ament_package()</span></code>. Ce point d’extension est utile lors de l’enregistrement des ressources (voir ci-dessous).</p>
<p><code class="docutils literal notranslate"><span class="pre">ament_register_extension</span></code> est une fonction qui prend exactement trois arguments :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">extension_point</span></code> : le nom du point d’extension (la plupart du temps, ce sera l’un des <code class="docutils literal notranslate"><span class="pre">ament_package</span></code> ou <code class="docutils literal notranslate"><span class="pre">rosidl_generate_interfaces</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">package_name</span></code> : le nom du package contenant le fichier CMake (c’est-à-dire le nom du projet dans lequel le fichier est écrit)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmake_filename</span></code> : le fichier CMake exécuté lorsque le point d’extension est exécuté</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Il est possible de définir des points d’extension personnalisés de la même manière que <code class="docutils literal notranslate"><span class="pre">ament_package</span></code> et <code class="docutils literal notranslate"><span class="pre">rosidl_generate_interfaces</span></code>, mais cela ne devrait pas être nécessaire.</p>
</div>
</div>
<div class="section" id="adding-extension-points">
<h3><a class="toc-backref" href="#id14">Ajout de points d’extension</a><a class="headerlink" href="#adding-extension-points" title="Lien permanent vers ce titre"></a></h3>
<p>Très rarement, il peut être intéressant de définir un nouveau point d’extension à ament.</p>
<p>Les points d’extension peuvent être enregistrés dans une macro afin que toutes les extensions soient exécutées lorsque la macro correspondante est appelée. Faire cela:</p>
<ul class="simple">
<li><p>Définissez et documentez un nom pour votre extension (par exemple <code class="docutils literal notranslate"><span class="pre">my_extension_point</span></code>), qui est le nom passé à la macro <code class="docutils literal notranslate"><span class="pre">ament_register_extension</span></code> lors de l’utilisation du point d’extension.</p></li>
<li><p>Dans la macro/fonction qui doit exécuter l’appel des extensions :</p></li>
</ul>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">ament_execute_extensions</span><span class="p">(</span><span class="s">my_extension_point</span><span class="p">)</span>
</pre></div>
</div>
<p>Les extensions Ament fonctionnent en définissant une variable contenant le nom du point d’extension et en la remplissant avec les macros à exécuter. Lors de l’appel de <code class="docutils literal notranslate"><span class="pre">ament_execute_extensions</span></code>, les scripts définis dans la variable sont alors exécutés les uns après les autres.</p>
</div>
</div>
<div class="section" id="adding-resources">
<h2><a class="toc-backref" href="#id15">Ajout de ressources</a><a class="headerlink" href="#adding-resources" title="Lien permanent vers ce titre"></a></h2>
<p>Surtout lors du développement de plugins ou de packages qui autorisent les plugins, il est souvent essentiel d’ajouter des ressources à un package ROS à partir d’un autre (par exemple, un plugin). Des exemples peuvent être des plugins pour des outils utilisant pluginlib.</p>
<p>Ceci peut être réalisé en utilisant l’indice d’ament (également appelé « indice de ressources »).</p>
<div class="section" id="the-ament-index-explained">
<h3><a class="toc-backref" href="#id16">L’indice d’ament expliqué</a><a class="headerlink" href="#the-ament-index-explained" title="Lien permanent vers ce titre"></a></h3>
<p>Pour plus de détails sur la conception et les intentions, voir <a class="reference external" href="https://github.com/ament/ament_cmake/blob/rolling/ament_cmake_core/doc/resource_index.md">ici</a></p>
<p>En principe, l’index d’ament est contenu dans un dossier du dossier install/share de votre package. Il contient des sous-dossiers superficiels nommés d’après différents types de ressources. Au sein du sous-dossier, chaque package fournissant ladite ressource est référencé par son nom avec un « fichier marqueur ». Le fichier peut contenir tout contenu nécessaire pour obtenir les ressources, par ex. chemins relatifs vers les répertoires d’installation de la ressource, il peut aussi être simplement vide.</p>
<p>Pour donner un exemple, envisagez de fournir des plugins d’affichage pour RViz : Lorsque vous fournissez des plugins RViz dans un projet nommé <code class="docutils literal notranslate"><span class="pre">my_rviz_displays</span></code> qui sera lu par le pluginlib, vous fournirez un fichier <code class="docutils literal notranslate"><span class="pre">plugin_description.xml</span></code>, qui sera installé et utilisé par le pluginlib pour charger les plugins. Pour ce faire, le plugin_description.xml est enregistré en tant que ressource dans le resource_index via</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">pluginlib_export_plugin_description_file</span><span class="p">(</span><span class="s">rviz_common</span><span class="w"> </span><span class="s">plugins_description.xml</span><span class="p">)</span>
</pre></div>
</div>
<p>Lors de l’exécution de <code class="docutils literal notranslate"><span class="pre">colcon</span> <span class="pre">build</span></code>, cela installe un fichier <code class="docutils literal notranslate"><span class="pre">my_rviz_displays</span></code> dans un sous-dossier <code class="docutils literal notranslate"><span class="pre">rviz_common__pluginlib__plugin</span></code> dans le resource_index. Les fabriques de plugins de rviz_common sauront rassembler des informations à partir de tous les dossiers nommés <code class="docutils literal notranslate"><span class="pre">rviz_common__pluginlib__plugin</span></code> pour les packages qui exportent des plugins. Le fichier marqueur pour les fabriques pluginlib contient un chemin relatif du dossier d’installation vers le fichier <code class="docutils literal notranslate"><span class="pre">plugins_description.xml</span></code> (et le nom de la bibliothèque comme nom de fichier marqueur). Avec ces informations, le pluginlib peut charger la bibliothèque et savoir quels plugins charger à partir du fichier <code class="docutils literal notranslate"><span class="pre">plugin_description.xml</span></code>.</p>
<p>Comme deuxième exemple, envisagez la possibilité de laisser vos propres plugins RViz utiliser vos propres maillages personnalisés. Les maillages sont chargés au démarrage afin que le propriétaire du plugin n’ait pas à s’en occuper, mais cela implique que RViz doit connaître les maillages. Pour cela, RViz propose une fonction :</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">register_rviz_ogre_media_exports</span><span class="p">(</span><span class="s">DIRECTORIES</span><span class="w"> </span><span class="s">&lt;my_dirs&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Cela enregistre les répertoires en tant que ressource ogre_media dans l’index ament. En bref, il installe un fichier nommé d’après le projet qui appelle la fonction dans un sous-dossier appelé <code class="docutils literal notranslate"><span class="pre">rviz_ogre_media_exports</span></code>. Le fichier contient les chemins relatifs du dossier d’installation vers les répertoires répertoriés dans les macros. Au démarrage, RViz peut désormais rechercher tous les dossiers appelés <code class="docutils literal notranslate"><span class="pre">rviz_ogre_media_exports</span></code> et charger les ressources dans tous les dossiers fournis. Ces recherches sont effectuées à l’aide de <code class="docutils literal notranslate"><span class="pre">ament_index_cpp</span></code> (ou <code class="docutils literal notranslate"><span class="pre">ament_index_py</span></code> pour les packages Python).</p>
<p>Dans les sections suivantes, nous explorerons comment ajouter vos propres ressources à l’index d’ament et fournirons les meilleures pratiques pour le faire.</p>
</div>
<div class="section" id="querying-the-ament-index">
<h3><a class="toc-backref" href="#id17">Interrogation de l’index d’ament</a><a class="headerlink" href="#querying-the-ament-index" title="Lien permanent vers ce titre"></a></h3>
<p>Si nécessaire, il est possible d’interroger l’index d’ament pour les ressources via CMake. Pour cela, trois fonctions :</p>
<p><code class="docutils literal notranslate"><span class="pre">ament_index_has_resource</span></code> : obtenez un chemin de préfixe vers la ressource si elle existe avec les paramètres suivants :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">var</span></code> : le paramètre de sortie : remplissez cette variable avec FALSE si la ressource n’existe pas ou le préfixe du chemin vers la ressource sinon</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resource_type</span></code> : le type de la ressource (par exemple, <code class="docutils literal notranslate"><span class="pre">rviz_common__pluginlib__plugin</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resource_name</span></code> : le nom de la ressource qui correspond généralement au nom du package ayant ajouté la ressource de type resource_type (par exemple, <code class="docutils literal notranslate"><span class="pre">rviz_default_plugins</span></code>)</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">ament_index_get_resource</span></code> : obtient le contenu d’une ressource spécifique, c’est-à-dire le contenu du fichier marqueur dans l’index d’ament.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">var</span></code> : le paramètre de sortie : rempli avec le contenu du fichier marqueur de ressource s’il existe.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resource_type</span></code> : le type de la ressource (par exemple, <code class="docutils literal notranslate"><span class="pre">rviz_common__pluginlib__plugin</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resource_name</span></code> : le nom de la ressource qui correspond généralement au nom du package ayant ajouté la ressource de type resource_type (par exemple, <code class="docutils literal notranslate"><span class="pre">rviz_default_plugins</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PREFIX_PATH</span></code> : Le chemin du préfixe à rechercher (généralement, le <code class="docutils literal notranslate"><span class="pre">ament_index_get_prefix_path()</span></code> par défaut suffira).</p></li>
</ul>
<p>Notez que <code class="docutils literal notranslate"><span class="pre">ament_index_get_resource</span></code> générera une erreur si la ressource n’existe pas, il peut donc être nécessaire de vérifier en utilisant <code class="docutils literal notranslate"><span class="pre">ament_index_has_resource</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">ament_index_get_resources</span></code> : récupère tous les packages qui ont enregistré des ressources d’un type spécifique à partir de l’index</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">var</span></code> : Paramètre de sortie : rempli avec une liste de noms de tous les packages qui ont enregistré une ressource de type_ressource</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resource_type</span></code> : le type de la ressource (par exemple, <code class="docutils literal notranslate"><span class="pre">rviz_common__pluginlib__plugin</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PREFIX_PATH</span></code> : Le chemin du préfixe à rechercher (généralement, le <code class="docutils literal notranslate"><span class="pre">ament_index_get_prefix_path()</span></code> par défaut suffira).</p></li>
</ul>
</div>
<div class="section" id="adding-to-the-ament-index">
<h3><a class="toc-backref" href="#id18">Ajout à l’index des aments</a><a class="headerlink" href="#adding-to-the-ament-index" title="Lien permanent vers ce titre"></a></h3>
<p>La définition d’une ressource nécessite deux informations :</p>
<ul class="simple">
<li><p>un nom pour la ressource qui doit être unique,</p></li>
<li><p>une mise en page du fichier marqueur, qui peut être n’importe quoi et peut aussi être vide (c’est vrai par exemple pour la ressource « package » marquant un package ROS 2)</p></li>
</ul>
<p>Pour la ressource de maillage RViz, les choix correspondants étaient :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rviz_ogre_media_exports</span></code> comme nom de la ressource,</p></li>
<li><p>chemin d’installation chemins relatifs vers tous les dossiers contenant des ressources. Cela vous permettra déjà d’écrire la logique d’utilisation de la ressource correspondante dans votre package.</p></li>
</ul>
<p>Pour permettre aux utilisateurs d’enregistrer facilement des ressources pour votre package, vous devez en outre fournir des macros ou des fonctions telles que la fonction pluginlib ou la fonction <code class="docutils literal notranslate"><span class="pre">rviz_ogre_media_exports</span></code>.</p>
<p>Pour enregistrer une ressource, utilisez la fonction ament <code class="docutils literal notranslate"><span class="pre">ament_index_register_resource</span></code>. Cela créera et installera les fichiers marqueurs dans le fichier resource_index. Par exemple, l’appel correspondant pour <code class="docutils literal notranslate"><span class="pre">rviz_ogre_media_exports</span></code> est le suivant :</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">ament_index_register_resource</span><span class="p">(</span><span class="s">rviz_ogre_media_exports</span><span class="w"> </span><span class="s">CONTENT</span><span class="w"> </span><span class="o">${</span><span class="nv">OGRE_MEDIA_RESOURCE_FILE</span><span class="o">}</span><span class="p">)</span>
</pre></div>
</div>
<p>Cela installe un fichier nommé comme <code class="docutils literal notranslate"><span class="pre">${PROJECT_NAME}</span></code> dans un dossier <code class="docutils literal notranslate"><span class="pre">rviz_ogre_media_exports</span></code> dans le resource_index avec le contenu donné par la variable <code class="docutils literal notranslate"><span class="pre">${OGRE_MEDIA_RESOURCE_FILE}</span></code>. La macro a un certain nombre de paramètres qui peuvent être utiles :</p>
<ul class="simple">
<li><p>le premier paramètre (sans nom) est le nom de la ressource, qui équivaut au nom du dossier dans le resource_index</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONTENT</span></code> : Le contenu du fichier marqueur sous forme de chaîne. Il peut s’agir d’une liste de chemins relatifs, etc. <code class="docutils literal notranslate"><span class="pre">CONTENT</span></code> ne peut pas être utilisé avec <code class="docutils literal notranslate"><span class="pre">CONTENT_FILE</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONTENT_FILE</span></code> : Le chemin vers un fichier qui sera utilisé pour créer le fichier marqueur. Le fichier peut être un fichier simple ou un fichier modèle développé avec <code class="docutils literal notranslate"><span class="pre">configure_file()</span></code>. <code class="docutils literal notranslate"><span class="pre">CONTENT_FILE</span></code> ne peut pas être utilisé avec <code class="docutils literal notranslate"><span class="pre">CONTENT</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PACKAGE_NAME</span></code> : le nom du package/de la bibliothèque exportant la ressource, qui correspond au nom du fichier marqueur. La valeur par défaut est <code class="docutils literal notranslate"><span class="pre">${PROJECT_NAME}</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AMENT_INDEX_BINARY_DIR</span></code> : Le chemin de base de l’index d’ament généré. Sauf si vraiment nécessaire, utilisez toujours la valeur par défaut <code class="docutils literal notranslate"><span class="pre">${CMAKE_BINARY_DIR}/ament_cmake_index</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SKIP_INSTALL</span></code> : ignore l’installation du fichier marqueur.</p></li>
</ul>
<p>Puisqu’il n’existe qu’un seul fichier marqueur par package, c’est généralement un problème si la fonction/macro CMake est appelée deux fois par le même projet. Cependant, pour les grands projets, il peut être préférable de diviser les appels enregistrant les ressources.</p>
<p>Par conséquent, il est préférable de laisser une macro enregistrant une ressource telle que <code class="docutils literal notranslate"><span class="pre">register_rviz_ogre_media_exports.cmake</span></code> ne remplir que certaines variables. Le véritable appel à <code class="docutils literal notranslate"><span class="pre">ament_index_register_resource</span></code> peut alors être ajouté dans une extension ament à <code class="docutils literal notranslate"><span class="pre">ament_package</span></code>. Puisqu’il ne doit y avoir qu’un seul appel à <code class="docutils literal notranslate"><span class="pre">ament_package</span></code> par projet, il n’y aura toujours qu’un seul endroit où la ressource sera enregistrée. Dans le cas de <code class="docutils literal notranslate"><span class="pre">rviz_ogre_media_exports</span></code> cela revient à la stratégie suivante :</p>
<ul class="simple">
<li><p>La macro <code class="docutils literal notranslate"><span class="pre">register_rviz_ogre_media_exports</span></code> prend une liste de dossiers et les ajoute à une variable appelée <code class="docutils literal notranslate"><span class="pre">OGRE_MEDIA_RESOURCE_FILE</span></code>.</p></li>
<li><p>Une autre macro appelée <code class="docutils literal notranslate"><span class="pre">register_rviz_ogre_media_exports_hook</span></code> appelle <code class="docutils literal notranslate"><span class="pre">ament_index_register_resource</span></code> si <code class="docutils literal notranslate"><span class="pre">${OGRE_MEDIA_RESOURCE_FILE}</span></code> n’est pas vide.</p></li>
<li><p>Le fichier <code class="docutils literal notranslate"><span class="pre">register_rviz_ogre_media_exports_hook.cmake</span></code> est enregistré en tant qu’extension ament dans un troisième fichier <code class="docutils literal notranslate"><span class="pre">register_rviz_ogre_media_exports_hook-extras.cmake</span></code> via l’appel</p></li>
</ul>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">ament_register_extension</span><span class="p">(</span><span class="s2">&quot;ament_package&quot;</span><span class="w"> </span><span class="s2">&quot;rviz_rendering&quot;</span>
<span class="w">  </span><span class="s2">&quot;register_rviz_ogre_media_exports_hook.cmake&quot;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Les fichiers <code class="docutils literal notranslate"><span class="pre">register_rviz_ogre_media_exports.cmake</span></code> et <code class="docutils literal notranslate"><span class="pre">register_rviz_ogre_media_exports_hook-extra.cmake</span></code> sont enregistrés en tant que <code class="docutils literal notranslate"><span class="pre">CONFIG_EXTRA</span></code> avec <code class="docutils literal notranslate"><span class="pre">ament_package()</span></code>.</p></li>
</ul>
</div>
</div>
</div>



           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pied de page">
        <a href="Developing-a-ROS-2-Package.html" class="btn btn-neutral float-left" title="Développement d’un package ROS 2" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Précédent</a>
        <a href="Ament-CMake-Python-Documentation.html" class="btn btn-neutral float-right" title="documentation utilisateur ament_cmake_python" accesskey="n" rel="next">Suivant <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Open Robotics.</p>
  </div>

  Compilé avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">thème</a>
    fourni par <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-17821189-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-17821189-2', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>